{"generatedAt":1700233244579,"generateTime":2995,"contents":[{"_path":"/","_dir":"","_draft":false,"_partial":false,"_locale":"","title":"Home","description":"","navigation":false,"layout":"page","main":{"fluid":false},"body":{"type":"root","children":[{"type":"element","tag":"ellipsis","props":{"blur":"150px","right":"0px","width":"75%"},"children":[]},{"type":"element","tag":"block-hero","props":{":cta":"[\"Get started\",\"/original/getting_started\"]",":secondary":"[\"Open on GitHub â†’\",\"https://github.com/mjbots/moteus\"]"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"moteus brushless servo."}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Motor drivers with integrated on-axis encoder"}]}]},{"type":"element","tag":"template","props":{"v-slot:extra":""},"children":[{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://mjbots.com/","rel":["nofollow"]},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Store Page"}]}]}]}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:0.index.md","_source":"content","_file":"0.index.md","_extension":"md"},{"_path":"/original/getting_started","_dir":"original","_draft":false,"_partial":false,"_locale":"","title":"Getting started with the moteus controller","description":"Binary versions of tview and moteus_tool can be installed for most\nplatforms (desktop Linux, Windows, Mac) via python using the\nmoteus_gui package.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"getting-started-with-the-moteus-controller"},"children":[{"type":"text","value":"Getting started with the moteus controller"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Binary versions of "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"tview"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"moteus_tool"}]},{"type":"text","value":" can be installed for most\nplatforms (desktop Linux, Windows, Mac) via python using the\n"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"moteus_gui"}]},{"type":"text","value":" package."}]},{"type":"element","tag":"pre","props":{"className":"language-sh shiki shiki-themes github-dark github-light","code":"pip3 install moteus_gui\n","language":"sh","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"pip3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" moteus_gui\n"}]}]}]}]},{"type":"element","tag":"h1","props":{"id":"platform-specific-requirements"},"children":[{"type":"text","value":"Platform Specific Requirements"}]},{"type":"element","tag":"h2","props":{"id":"raspberry-pi"},"children":[{"type":"text","value":"Raspberry Pi"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you have a Raspberry Pi, see the "},{"type":"element","tag":"a","props":{"href":"raspberry_pi"},"children":[{"type":"text","value":"instructions here"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"linux"},"children":[{"type":"text","value":"Linux"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If using the fdcanusb, you will need to have udev rules set up in order for regular users to access the device.  Follow the instructions at: "},{"type":"element","tag":"a","props":{"href":"https://github.com/mjbots/fdcanusb/blob/master/70-fdcanusb.rules","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/mjbots/fdcanusb/blob/master/70-fdcanusb.rules"}]}]},{"type":"element","tag":"h2","props":{"id":"windows"},"children":[{"type":"text","value":"Windows"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"On some modern Windows installations, you need to invoke python as "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"python"}]},{"type":"text","value":", not "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"python3"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h1","props":{"id":"running-tview"},"children":[{"type":"text","value":"Running tview"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"tview lets you configure and inspect the state of the controller.  It\ncan be run like:"}]},{"type":"element","tag":"pre","props":{"className":"language-sh shiki shiki-themes github-dark github-light","code":"python3 -m moteus_gui.tview --devices=1\n","language":"sh","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"python3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" -m"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" moteus_gui.tview"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" --devices=1\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(Your pip may have installed a "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"tview"}]},{"type":"text","value":" script into your path which you\ncould also use)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By default, it attempts to detect an attached fdcanusb to communicate\nwith the target."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"tview has three panes, left, right, and bottom.  Further, the left\npane has two tabs."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Left pane, right tab (the default) shows a hierarchical tree of all\ntelemetry items."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Left pane, left tab shows a hierarchical tree of all configurable\nparameters.  Parameter values can be updated by double clicking on\ntheir value and entering a new one."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The right pane shows real time plots of telemetry items.  It can be\npopulated with plots by right clicking on telemetry items in the\ntelemetry tab."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The bottom pane has a command line console which shows the commands\nsent internally by tview and their responses, and provides an\ninteractive console to interact with the device using the diagnostic\nprotocol."}]},{"type":"element","tag":"h1","props":{"id":"how-position-mode-works"},"children":[{"type":"text","value":"How position mode works"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The primary control mode for the moteus controller is an integrated\nposition/velocity controller.  The semantics of the control command\nare somewhat unorthodox, so as to be easily amenable to idempotent\ncommands sent from a higher level controller.  Each command looks\nlike:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Position: The desired position in revolutions"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Velocity: The rate at which the desired position changes in\nrevolutions / s"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Maximum torque: Never use more than this amount of torque when controlling"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Feedforward torque: Give this much extra torque beyond what the\nnormal control loop says"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Stop position: If non-special, never move the desired position away\nfrom this target."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"kp scale: Scale the proportional constant by this factor"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"kd scale: Scale the derivative constant by this factor"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Velocity limit override: If non-special, override the configured\nvelocity limit, which constrains how quickly the target position is\nreached."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Acceleration limit override: If non-special, override the\nconfigured acceleration limit, which constrains how quickly the\ntarget position is reached."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Additionally, the position may be set as a \"special value\" (NaN for\nfloating point and the debug interface, maximal negative for integer\nencodings).  In that case, the position selected is \"wherever you are\nright now\"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A pure velocity mode can be obtained by setting the kp scale to 0 (or\npermanently so by configuring the kp constant to 0).  In this case,\nusing the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.max_position_slip"}]},{"type":"text","value":" configurable parameter may be\nvaluable as per the "},{"type":"element","tag":"a","props":{"href":"reference#velocity-control"},"children":[{"type":"text","value":"reference manual"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h1","props":{"id":"initial-configuration"},"children":[{"type":"text","value":"Initial Configuration"}]},{"type":"element","tag":"h2","props":{"id":"important-note-on-electrical-damage"},"children":[{"type":"text","value":"IMPORTANT NOTE ON ELECTRICAL DAMAGE"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"moteus uses moderately large currents and moderately high voltages.  It is important to take many factors in consideration when deploying it to avoid electrical damage to the controller.  Before soldering cables, or attaching moteus to a new motor, be sure to read and understand each of the following sections in the reference manual:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"reference#phase-wire-soldering"},"children":[{"type":"text","value":"Phase Wire Soldering"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"reference#power-cable-construction"},"children":[{"type":"text","value":"Cable Construction"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"reference#power-connectorization"},"children":[{"type":"text","value":"Power Connectorization"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"reference#regenerative-braking-safety"},"children":[{"type":"text","value":"Regenerative Braking Safety"}]}]}]},{"type":"element","tag":"h2","props":{"id":"parameters"},"children":[{"type":"text","value":"Parameters"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There are a few parameters you will likely want to configure early on\nin your setup regardless:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servopos.position_min"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servopos.position_max"}]},{"type":"text","value":" these define the bounds of motion which the controller will allow when in position control mode.  Attempting to start beyond this region will fault, and if outside the region in operation, no torque will be applied to go further outside."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.max_current_A"}]},{"type":"text","value":" the maximum phase current to apply to the motor.  This can be used to limit the maximum torque that the system is capable of regardless of any command sent."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.default_velocity_limit"}]},{"type":"text","value":" / "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.default_accel_limit"}]},{"type":"text","value":" controls how fast the motor can accelerate and spin in order to reach position and velocity targets.  Bare boards ship with these unset, while development kits ship with human-eye pleasing values."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.pid_position"}]},{"type":"text","value":" the PID parameters for the position control loop."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.rotor_to_output_ratio"}]},{"type":"text","value":" any gearbox scaling, a reducing gearbox should be configured with a number smaller than one, e.g. 0.25 for a 4x reduction gearbox.  This affects reported position, speed, and torques."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"id.id"}]},{"type":"text","value":" the CAN-FD id used by this device"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A larger set of parameters is documented in the reference manual."}]},{"type":"element","tag":"h2","props":{"id":"calibration"},"children":[{"type":"text","value":"Calibration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you started from a bare moteus board, you will need to calibrate it\nfor the attached motor before any control modes are possible."}]},{"type":"element","tag":"pre","props":{"className":"language-sh shiki shiki-themes github-dark github-light","code":"python3 -m moteus.moteus_tool --target 1 --calibrate\n","language":"sh","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"python3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" -m"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" moteus.moteus_tool"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" --target"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" 1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" --calibrate\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"WARNING: Any attached motor must be able to spin freely.  It will be\nspun in both directions and at high speed."}]},{"type":"element","tag":"h1","props":{"id":"learning-more"},"children":[{"type":"text","value":"Learning more"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The complete reference documentation can be found at:\n"},{"type":"element","tag":"a","props":{"href":"reference"},"children":[{"type":"text","value":"Reference"}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"raspberry-pi","depth":2,"text":"Raspberry Pi"},{"id":"linux","depth":2,"text":"Linux"},{"id":"windows","depth":2,"text":"Windows"},{"id":"important-note-on-electrical-damage","depth":2,"text":"IMPORTANT NOTE ON ELECTRICAL DAMAGE"},{"id":"parameters","depth":2,"text":"Parameters"},{"id":"calibration","depth":2,"text":"Calibration"}]}},"_type":"markdown","_id":"content:1.original:1.getting_started.md","_source":"content","_file":"1.original/1.getting_started.md","_extension":"md"},{"_path":"/original/raspberry_pi","_dir":"original","_draft":false,"_partial":false,"_locale":"","title":"Raspberry Pi Installation","description":"The non-gui moteus library will work on a Raspberry Pi out of the box:","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"raspberry-pi-installation"},"children":[{"type":"text","value":"Raspberry Pi Installation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The non-gui moteus library will work on a Raspberry Pi out of the box:"}]},{"type":"element","tag":"pre","props":{"className":"language-sh shiki shiki-themes github-dark github-light","code":"pip3 install moteus\n","language":"sh","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"pip3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" moteus\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"However, neither pypi nor piwheels has a functioning pyside2 library,\nwhich is needed for "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"moteus_gui"}]},{"type":"text","value":", and thus tview.  Fortunately, it is\npackaged in Raspberry Pi OS.  To use that version, you can do the\nfollowing:"}]},{"type":"element","tag":"pre","props":{"className":"language-sh shiki shiki-themes github-dark github-light","code":"sudo apt install python3-pyside2* python3-serial python3-can python3-matplotlib python3-qtconsole\nsudo pip3 install asyncqt importlib_metadata pyelftools\nsudo pip3 install --no-deps moteus moteus_gui\n","language":"sh","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" apt"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" python3-pyside2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" python3-serial"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" python3-can"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" python3-matplotlib"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" python3-qtconsole\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" pip3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" asyncqt"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" importlib_metadata"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" pyelftools\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" pip3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" --no-deps"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" moteus"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" moteus_gui\n"}]}]}]}]},{"type":"element","tag":"h1","props":{"id":"running-moteus_tool-and-tview"},"children":[{"type":"text","value":"Running moteus_tool and tview"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"pi3hat specific options for these tools are documented at "},{"type":"element","tag":"a","props":{"href":"https://github.com/mjbots/pi3hat/blob/master/docs/reference.md#usage-with-client-side-tools","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/mjbots/pi3hat/blob/master/docs/reference.md#usage-with-client-side-tools"}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:1.original:2.raspberry_pi.md","_source":"content","_file":"1.original/2.raspberry_pi.md","_extension":"md"},{"_path":"/original/reference","_dir":"original","_draft":false,"_partial":false,"_locale":"","title":"Reference","description":"moteus controller reference","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"moteus controller reference"}]},{"type":"element","tag":"h1","props":{"id":"overview"},"children":[{"type":"text","value":"Overview"}]},{"type":"element","tag":"h2","props":{"id":"theory-of-operation"},"children":[{"type":"text","value":"Theory of Operation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The moteus controller is intended to drive 3 phase brushless motors\nusing field oriented control.  It has an integrated magnetic encoder\nfor sensing the rotor position, 3 half-H bridges for switching power\nto each of the three phases, and current sense capability on each of\nthe three phases."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The primary control mode, labeled as \"position\" mode in the rest of\nthis document is a two stage cascaded controller, with both running at\nthe switching frequency (by default 30kHz)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The outermost stage is an optional limited acceleration and velocity\ntrajectory planner.  Within that is an integrated position/velocity\nPID controller with optional feedforward torque.  The output of that\nloop is a desired torque/current for the Q phase of the FOC\ncontroller."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The inner stage is a current mode PI controller.  Its output is the\ndesired voltage value for the Q phase.  Then the magnetic encoder is\nused to map the D/Q phase voltage values to the 3 phases of the motor."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Control Structure","src":"/1.original/media/control_structure.png","style":{"aspectRatio":"778/240"}},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"More precisely, the \"Position Controller\" implements the following\ncontrol law:"}]},{"type":"element","tag":"pre","props":{"code":"acceleration = trajectory_follower(command_position, command_velocity)\ncontrol_velocity = command_velocity OR control_velocity + acceleration * dt OR 0.0\ncontrol_position = command_position OR control_position + control_velocity * dt\nposition_error = control_position - feedback_position\nvelocity_error = control_velocity - feedback_velocity\nposition_integrator = limit(position_integrator + ki * position_error * dt, ilimit)\ntorque = position_integrator +\n         kp * kp_scale * position_error +\n         kd * kd_scale * velocity_error +\n         command_torque\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"acceleration = trajectory_follower(command_position, command_velocity)\ncontrol_velocity = command_velocity OR control_velocity + acceleration * dt OR 0.0\ncontrol_position = command_position OR control_position + control_velocity * dt\nposition_error = control_position - feedback_position\nvelocity_error = control_velocity - feedback_velocity\nposition_integrator = limit(position_integrator + ki * position_error * dt, ilimit)\ntorque = position_integrator +\n         kp * kp_scale * position_error +\n         kd * kd_scale * velocity_error +\n         command_torque\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"And the \"Current Controller\" implements the following control law:"}]},{"type":"element","tag":"pre","props":{"code":"current_error = command_current - feedback_current\ncurrent_integrator = limit(current_integrator + ki * current_error, ilimit)\nvoltage = current_integrator + kp * current_error\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"current_error = command_current - feedback_current\ncurrent_integrator = limit(current_integrator + ki * current_error, ilimit)\nvoltage = current_integrator + kp * current_error\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Since PID scaling for the position mode loop can be adjusted on a\ncycle-by-cycle basis with the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"kp_scale"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"kd_scale"}]},{"type":"text","value":" terms, this\nallows you to operate the controller with full\nposition/velocity/torque control, or velocity/torque, or just torque,\nor any combination seamlessly throughout the control cycle."}]},{"type":"element","tag":"h2","props":{"id":"usage-modes"},"children":[{"type":"text","value":"Usage Modes"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The available knobs to the moteus controller allow it to implement a\nfew different types of control schemes.  From the factory, the control\ngains are selected for medium torque bandwidth.  For other\napplications, here are suggestions for gains and control options to\nuse."}]},{"type":"element","tag":"h3","props":{"id":"velocity-control"},"children":[{"type":"text","value":"Velocity Control"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To implement a velocity controller, each command should have the\n\"position\" set to NaN (or equivalent integral encoding).  It is\nrecommended to configure "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.max_position_slip"}]},{"type":"text","value":" to a finite value\ngreater than or equal to 0 ("},{"type":"element","tag":"a","props":{"href":"#servomax_position_slip"},"children":[{"type":"text","value":"reference"}]},{"type":"text","value":").\nWhen it is larger, more external disturbances will be rejected, but\nthe controller will also \"catch up\" when the magnitude of external\ndisturbances is decreased."}]},{"type":"element","tag":"h3","props":{"id":"low-speed-or-precise-positioning"},"children":[{"type":"text","value":"Low Speed or Precise Positioning"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For either operation at very low speeds, or when precise positioning\nperformance is desired, it is recommended to configure a non-zero "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"ki"}]},{"type":"text","value":"\nand "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"ilimit"}]},{"type":"text","value":" term in the position controller\n("},{"type":"element","tag":"a","props":{"href":"#servopid_position"},"children":[{"type":"text","value":"reference"}]},{"type":"text","value":").  This will compensate for cogging\ntorque (at the expense of overall torque bandwidth).  It may also be\nbeneficial to select a alternate values for "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"moteus_tool --cal-bw-hz"}]},{"type":"text","value":"\nduring calibration (higher or lower)."}]},{"type":"element","tag":"h3","props":{"id":"constant-acceleration-trajectories"},"children":[{"type":"text","value":"Constant Acceleration Trajectories"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Velocity and acceleration limits can be configured either globally, or\non a per-command basis which will cause moteus to internally generate\ncontinuous acceleration limited trajectories to reach the given\nposition and velocity.  Once the trajectory is complete, the command\nvelocity is continued indefinitely."}]},{"type":"element","tag":"h3","props":{"id":"jerk-limited-trajectories"},"children":[{"type":"text","value":"Jerk Limited Trajectories"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"moteus only supports acceleration limited internal trajectories.  To\napproximate a constant jerk trajectory, the host processor should send\na sequence of piecewise linear constant velocity trajectories which\napproximate the desired one.  This would be done by sending commands\nconsisting of at least a position and velocity at some moderate to\nhigh rate while disabling the internal velocity and acceleration\nlimits."}]},{"type":"element","tag":"h3","props":{"id":"high-torque-bandwidth"},"children":[{"type":"text","value":"High Torque Bandwidth"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"High torque bandwidth is desired for legged robots, or other\napplications where it is necessary to respond to external disturbances\nas rapidly as possible or accelerate the load maximally.  For these\napplications, it is recommended to have no integrative term in the\nposition controller ("},{"type":"element","tag":"a","props":{"href":"#servopid_position"},"children":[{"type":"text","value":"reference"}]},{"type":"text","value":").  When\ncalibrating the motor, you may use the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"moteus_tool --cal-bw-hz"}]},{"type":"text","value":"\noption to select a bandwidth higher than the default of 100Hz (or\nmanually select servo.pid_dq.kp/ki after calibration)."}]},{"type":"element","tag":"h3","props":{"id":"torque-control"},"children":[{"type":"text","value":"Torque Control"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For a pure torque control application, configure the position control\nloop kp, kd, and ki to 0\n("},{"type":"element","tag":"a","props":{"href":"#servopid_position"},"children":[{"type":"text","value":"reference"}]},{"type":"text","value":"). Alternately you can set the\nkp_scale and kd_scale to 0 in each command."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note, however, that external torque control will be much lower\nbandwidth than using the internal position controller of moteus (~50x\nlower bandwidth if maximal CAN-FD update rate is achieved).  Thus, a\nsystem will usually perform better if as much of the desired control\nlaw as possible is formulated in terms of the built in position\ncontroller."}]},{"type":"element","tag":"h2","props":{"id":"encoder-configuration"},"children":[{"type":"text","value":"Encoder Configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"moteus includes an onboard on-axis magnetic encoder and supports a\nnumber of options for using external encoders.  To understand how to\nuse them, we first need to know the two things that moteus needs\nencoders for:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Commutation"}]},{"type":"text","value":": moteus needs to know the electrical relationship\nbetween the stator and the rotor in order to apply torque."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Output"}]},{"type":"text","value":": moteus needs to know the position and velocity of the\noutput shaft in order to follow commanded trajectories."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A variety of hardware encoder types can be used to fulfill those\nfunctions.  Currently supported options include:"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Name"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Interface Method"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Max Resolution"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Mounting"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Price"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Onboard AS5047P"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"SPI (integrated)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"14 bits"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"on-axis"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Included"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"AS5047x"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"SPI"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"14 bits"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"on-axis"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"$"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"AS5048B"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"I2C"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"14 bits"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"on-axis"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"$"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"AS5600"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"I2C"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"12 bits"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"on-axis"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"$"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"AksIM-2"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"RS422 w/ 5V"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"20 bits"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"off-axis"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"$$$"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"CUI AMT21x"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"RS422 w/ 5V"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"14 bits"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"shaft"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"$$"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"MA732"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"SPI"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"14 bits"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"on/off-axis"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"$"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"iC-PZ"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"SPI w/ 5V"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"22 bits"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"off-axis"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"$$$"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Quadrature"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Quadrature"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"N/A"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"x"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Sine/Cosine"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Sine/Cosine"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"10 bits"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"x"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Hall effect"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Hall effect"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"x"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"$"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By default, the onboard magnetic encoder (AS5047P) is assumed to sense\nthe rotor.  It is also used as the source for position and velocity of\nthe output constrained by a configurable reduction ratio."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Configuration is performed in 3 stages, first is the auxiliary port\nconfiguration, second is encoder source configuration, and finally is\nthe output configuration."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"IO Structure","src":"/1.original/media/io_structure.png","style":{"aspectRatio":"1344/627"}},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"auxiliary-port"},"children":[{"type":"text","value":"Auxiliary Port"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There are two auxiliary ports on moteus, each with pins that can be\nused for various functions."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ELECTRICAL NOTES:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The 3.3V supply pins can power external peripherals:\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"r4.5: 50mA"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"r4.8/r4.11/n1: 100mA"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The 5V supply pins can power external peripherals:\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"r4: not present"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"n1: 100mA"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Some pins are 5V tolerant.  Those not marked as such in the pin\noption table are 3.3V only."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The following capabilities can be used.  Some are supported on any\npins, others only on select pins."}]},{"type":"element","tag":"h4","props":{"id":"software-quadrature-input"},"children":[{"type":"text","value":"Software Quadrature Input"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pins: any"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The software quadrature feature uses GPIO pins to read incremental\nquadrature encoders.  It is capable of counting at 200,000 counts per\nsecond without error, but incurs processor overhead that increases\nwith count rate.  Higher overhead means the latency to respond to CAN\nmessages increases."}]},{"type":"element","tag":"h4","props":{"id":"hall-sensor"},"children":[{"type":"text","value":"Hall sensor"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pins: any"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"3 hall sensor inputs are required.  For many hall sensors, the pullup\nmust be configured for the auxiliary port pin in question."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When using hall effect sensors as the commutation source, calibration\nwith moteus_tool requires the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"--cal-hall"}]},{"type":"text","value":" option be passed."}]},{"type":"element","tag":"h4","props":{"id":"index"},"children":[{"type":"text","value":"Index"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pins: any"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is a single pin that is high when the encoder is in a known\nlocation.  It can be fed from the \"I\" signal of an ABI output, or a\ndedicated homing sensor."}]},{"type":"element","tag":"h4","props":{"id":"gpio-input"},"children":[{"type":"text","value":"GPIO Input"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pins: any"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Any pin may be designated as a GPIO input.  Its value may be read over\nthe diagnostic or register protocols."}]},{"type":"element","tag":"h4","props":{"id":"i2c-master"},"children":[{"type":"text","value":"I2C Master"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pins: select"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Between 1 and 3 I2C devices may be periodically polled at rates up to\n200Hz.  The associated pins on moteus r4.5/8/11 have permanently\nconfigured 2kohm pullup resistors."}]},{"type":"element","tag":"h4","props":{"id":"spi-master"},"children":[{"type":"text","value":"SPI Master"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pins: select"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A variety of SPI based peripherals are supported.  This mode is also\nused for the onboard encoder, which when enabled, claims the CLK,\nMOSI, and MISO pins on auxiliary port 1."}]},{"type":"element","tag":"h4","props":{"id":"hardware-quadrature-input"},"children":[{"type":"text","value":"Hardware Quadrature Input"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pins: select"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Hardware quadrature pins use microcontroller peripherals to process\nquadrature input at any speed with no processor overhead."}]},{"type":"element","tag":"h4","props":{"id":"sinecosine"},"children":[{"type":"text","value":"Sine/cosine"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pins: select"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Analog sine/cosine inputs are supported with a configurable common\nmode voltage."}]},{"type":"element","tag":"h4","props":{"id":"analog-input"},"children":[{"type":"text","value":"Analog input"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pins: select"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Arbitary analog inputs can be read either over the diagnostic or\nregister protocol."}]},{"type":"element","tag":"h4","props":{"id":"uart"},"children":[{"type":"text","value":"UART"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pins: select"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A variety of asynchronous serial encoders and debugging facilities are\nsupported."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The moteus-n1 additionally has a hardware RS422 transceiver connected\nto aux1's pins D and E which can be enabled through configuration.\nRS485 devices like the CUI AMT21x can be used if the RS422 pin Y is\nconnected to A and RS422 pin Z is connected to B."}]},{"type":"element","tag":"h3","props":{"id":"pin-options"},"children":[{"type":"text","value":"Pin Options"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The following table shows which pins can be used for the unique capabilities:"}]},{"type":"element","tag":"h4","props":{"id":"aux1-enc"},"children":[{"type":"text","value":"AUX1 / ENC"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"moteus r4.5/8/11"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Con"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Aux"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"SPI"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"ADC/Sin/Cos"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"I2C"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"HW Quad"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"UART"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"5VT"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"3.3V  (3)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"X"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"X"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"GND (G)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"K"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"CLK"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"X"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"I"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"MISO"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"X"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"O"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"MOSI"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"X"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]}]}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"moteus n1"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Con"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"AUX"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"SPI"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"ADC/Sin/Cos"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"I2C"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"HW Quad"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"UART"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"5VT"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"5V (5)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"3.3V (3)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"A"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"CLK"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"X"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"B *"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"MISO"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"3.1"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"RX"}]},{"type":"element","tag":"td","props":{},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"MOSI"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"X"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"3.2"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"D"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"SCL"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"2.1"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"RX"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"X"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"E"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"7"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"SDA"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"2.2"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"TX"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"X"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"GND (G)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"8"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"NOTE: For moteus n1, the B pin software configured pullup cannot be\nused effectively.  Thus the B pin is unsuitable for open-drain inputs\nlike hall effect sensors unless external pullups are provided."}]},{"type":"element","tag":"h4","props":{"id":"aux2-abs"},"children":[{"type":"text","value":"AUX2 / ABS"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"moteus r4.5/8/11"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Con"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Aux"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"SPI"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"ADC/Sin/Cos"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"I2C"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"HW Quad"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"UART"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"5VT"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"3.3V (3)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"SCL"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"RX"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"X"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"SDA"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"TX"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"X"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"GND (G)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"DBG 1"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"X"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"DBG 2"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"X"}]}]}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"moteus n1"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Con"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"AUX"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"SPI"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"ADC/Sin/Cos"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"I2C"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"HW Quad"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"UART"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"5VT"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"5V (5)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"3.3V (3)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"A"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"CLK"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"X"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"X"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"B"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"MISO"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"X"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"SDA"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"RX"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"X"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"MOSI"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"X"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"SCL"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"4.1"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"TX"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"X"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"D"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"6"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"4.2"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"RX"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"X"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"GND (G)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"7"}]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]},{"type":"element","tag":"td","props":{},"children":[]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"NOTE: For moteus r4.5/8/11, DBG 1/2 are not present on the ABS\nconnector, but are exposed pads on the circuit board."}]},{"type":"element","tag":"h4","props":{"id":"pin-configuration"},"children":[{"type":"text","value":"Pin Configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Auxiliary port configuration is achieved in two steps.  First, the\n"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].pins.X.mode"}]},{"type":"text","value":" value is set to the proper capability for each\npin.  "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].pins.X.pull"}]},{"type":"text","value":" can be used to configure an optional\npullup or pulldown for some modes.  Second, the corresponding\ncapabilities must be configured in one of the capability specific\nsections of "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12]"}]},{"type":"text","value":".  For instance, for each auxiliary port, the SPI\nconfiguration in "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].spi"}]},{"type":"text","value":" has a "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"mode"}]},{"type":"text","value":" to select what the slave\ndevice is and a "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"rate_hz"}]},{"type":"text","value":" to define the frequency of the SPI\nperipheral."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For I2C ports, up to 3 different slave devices may be configured, in\neach of "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].i2c.devices.[012]"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The diagnostic values in "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12]"}]},{"type":"text","value":" can be used to monitor for errors\nfrom mis-configuration or mis-operation."}]},{"type":"element","tag":"h3","props":{"id":"source-configuration"},"children":[{"type":"text","value":"Source Configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once the auxiliary ports have been configured, next encoder sources\nshould be configured in "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.sources"}]},{"type":"text","value":".  Up to 3 sources may\nbe configured, with the available types roughly corresponding to the\ncategories available from the auxiliary ports.  Typically, source 0 is\nused for the sensor that is used for commutation."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For each source "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.sources.[012].aux_number"}]},{"type":"text","value":" should be\neither \"1\" or \"2\", to select which auxiliary port the sensor should be\nread from.  "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.sources.[012].type"}]},{"type":"text","value":" selects the type of\nsensor.  For I2C based sources,\n"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.sources.[012].i2c_device"}]},{"type":"text","value":" selects "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"which"}]},{"type":"text","value":" I2C device\non that auxiliary port is used."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For sources that are incremental only, like quadrature, a source level\nindex may be configured in\n"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.sources.[012].incremental_index"}]},{"type":"text","value":".  This should be used\nif the incremental source is needed to provide position for\ncommutation."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Each source can be marked as measuring the rotor or the output in\n"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.sources.[012].reference"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Each source has configuration that determines how to map the raw value\nprovided by the device into a rotary angle.  "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"cpr"}]},{"type":"text","value":" is the number of\ncounts per revolution, "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"offset"}]},{"type":"text","value":" provides an integral count offset, and\n"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"sign"}]},{"type":"text","value":" can be used to invert the reading.  The final reading is\n"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"(raw + offset) * sign / cpr"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Finally, each source has a configurable low pass filter, with cutoff\nfrequency set by "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.sources.[012].pll_filter_hz"}]},{"type":"text","value":".  It may\nbe set to 0 to disable the filter.  If disabled no velocity will be\ninterpolated on sensors that do not provide it natively."}]},{"type":"element","tag":"h3","props":{"id":"output-configuration"},"children":[{"type":"text","value":"Output Configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The third major stage controls how the sources are used by the motor\ncontroller.  Some source selections may be left at -1, which disables\nthat feature."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.commutation_source"}]},{"type":"text","value":" selects which source is used to\nprovide rotor position for commutation purposes.  It is typically left\nat source 0 and is required.  Note, quadrature sources are not\nrecommended for commutation as they can lose counts and require\nadditional application level homing support on each power-on."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.output.source"}]},{"type":"text","value":" selects which source is used to provide\noutput position and velocity and is required."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.output.offset"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.output.sign"}]},{"type":"text","value":" are\nused to transform the output position to achieve a given zero point\nand rotational direction."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.output.reference_source"}]},{"type":"text","value":" optionally configures a\nsource that is used solely to disambiguate the output position at\nstartup.  It could be a low-rate I2C based sensor for instance, or an\nindex source configured from a homing switch."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Finally, "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.rotor_to_output_ratio"}]},{"type":"text","value":" defines the number of\nturns of the output for one turn of the rotor.  This is used to map\nthe readings from sensors that are defined relative to one into the\nother."}]},{"type":"element","tag":"h1","props":{"id":"a-register-command-set"},"children":[{"type":"text","value":"A. register command set"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The register command set is intended for use in real-time\napplications.  It provides multiple levels of conciseness, and is\npossible to operate at over 1kHz on the provided FD-CAN communications\nbus."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Common definitions:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"endian-ness"}]},{"type":"text","value":": All primitive types are in least significant byte\nfirst"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"varuint"}]},{"type":"text","value":": A sequence of one or more uint8 values, in least\nsignificant byte first order.  For each value, the 7 LSBs contain\ndata and if the MSB is set, it means there are more bytes remaining.\nAt most, it may represent a single uint32 and thus 5 bytes is the\nmaximum valid length."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"float"}]},{"type":"text","value":": An IEEE 754 32-bit floating point number."}]}]},{"type":"element","tag":"h2","props":{"id":"a1-can-format"},"children":[{"type":"text","value":"A.1 CAN Format"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Communication with moteus is conducted via CAN-FD frames with a 1Mbit\nstandard bitrate and a 5Mbit data bitrate."}]},{"type":"element","tag":"h3","props":{"id":"can-id"},"children":[{"type":"text","value":"CAN ID"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The ID is structured as a 16 bit number, with the high 8 bits being\nthe \"source\" and the low 8 bits being the \"destination\".  The\ndestination is the 7 bit servo ID with 0 as the highest bit.  The\nsource is an arbitrary 7 bit number, with the high bit being 1 if\nmoteus should reply to the message."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The CAN frame must be an extended one if the ID would be greater than\n0x7fff, but otherwise whether or not a frame is extended is not\nconsidered."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Example:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ID: 0x8001"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Send from source 0"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"To destination 1"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"16th bit is set, so a reply is requested"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ID: 0x100"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Send from source 1"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"To destination 0"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"No reply is requested"}]}]},{"type":"element","tag":"h3","props":{"id":"subframes"},"children":[{"type":"text","value":"Subframes"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Each CAN-FD frame contains one or more \"subframes\".  A short\ndescription of the allowable subframe types are described below.  The\ncanonical reference is located at\n"},{"type":"element","tag":"a","props":{"href":"https://github.com/mjbots/mjlib/blob/master/mjlib/multiplex/format.h","rel":["nofollow"]},"children":[{"type":"text","value":"multiplex/format.h"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Any extra trailing padding bytes required in the CAN-FD frame should\nbe set to NOP (0x50)."}]},{"type":"element","tag":"h4","props":{"id":"a1a-write-registers"},"children":[{"type":"text","value":"A.1.a Write Registers"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"0x00, 0x04, 0x08, 0x0c"}]},{"type":"text","value":" - write (int8|int16|int32|float)"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"varuint"}]},{"type":"text","value":" => number of registers (may be optionally encoded as a\nnon-zero 2 LSBS of the subframe type)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"varuint"}]},{"type":"text","value":" => start register number"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"N x (int8|int16|int32|float) => values"}]}]},{"type":"element","tag":"h4","props":{"id":"a1b-read-registers"},"children":[{"type":"text","value":"A.1.b Read Registers"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"0x10, 0x14, 0x18, 0x1c"}]},{"type":"text","value":" - read (int8|int16|int32|float)"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"varuint"}]},{"type":"text","value":" => number of registers (may be optionally encoded as a non-zero 2 LSBs)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"varuint"}]},{"type":"text","value":" => start register number"}]}]},{"type":"element","tag":"h4","props":{"id":"a1c-reply"},"children":[{"type":"text","value":"A.1.c Reply"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"0x20, 0x24, 0x28, 0x2c"}]},{"type":"text","value":" - reply (int8|int16|int32|float)"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"varuint"}]},{"type":"text","value":" => number of registers (may be optionally encoded as a non-zero 2 LSBs)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"varuint"}]},{"type":"text","value":" => start register number"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"N x (int8|int16|int32|float) => values"}]}]},{"type":"element","tag":"h4","props":{"id":"a1d-errors"},"children":[{"type":"text","value":"A.1.d Errors"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"0x30, 0x31"}]},{"type":"text","value":" - write/read error"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"varuint"}]},{"type":"text","value":" => register number"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"varuint"}]},{"type":"text","value":" => error number"}]}]},{"type":"element","tag":"h4","props":{"id":"a1e-nop"},"children":[{"type":"text","value":"A.1.e NOP"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"0x50"}]},{"type":"text","value":" - no operation"}]},{"type":"element","tag":"h2","props":{"id":"a2-register-usage"},"children":[{"type":"text","value":"A.2 Register Usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Each register may be accessed as potentially multiple data types.\nThis section describes the common mappings, and the semantics of each\nregister."}]},{"type":"element","tag":"h3","props":{"id":"a2a-mappings"},"children":[{"type":"text","value":"A.2.a Mappings"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When registers are accessed as integer types, the following mappings\nare used to encode the underlying floating point values into integer\nvalues."}]},{"type":"element","tag":"h4","props":{"id":"a2a1-current-measured-in-amps"},"children":[{"type":"text","value":"A.2.a.1 Current (measured in Amps)"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int8 => 1 LSB => 1A"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int16 => 1 LSB => 0.1A"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int32 => 1 LSB => 0.001A"}]}]},{"type":"element","tag":"h4","props":{"id":"a2a2-torque-measured-in-nm"},"children":[{"type":"text","value":"A.2.a.2 Torque (measured in N*m)"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int8 => 1 LSB => 0.5 N*m"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int16 => 1 LSB => 0.01 N*m"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int32 => 1 LSB => 0.001 N*m"}]}]},{"type":"element","tag":"h4","props":{"id":"a2a3-voltage-measured-in-volts"},"children":[{"type":"text","value":"A.2.a.3 Voltage (measured in Volts)"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int8 => 1 LSB => 0.5V"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int16 => 1 LSB => 0.1V"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int32 => 1 LSB => 0.001 V"}]}]},{"type":"element","tag":"h4","props":{"id":"a2a4-temperature-measured-in-degrees-celsius"},"children":[{"type":"text","value":"A.2.a.4 Temperature (measured in degrees Celsius)"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int8 => 1 LSB => 1 C"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int16 => 1 LSB => 0.1C"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int32 => 1 LSB => 0.001 C"}]}]},{"type":"element","tag":"h4","props":{"id":"a2a5-time-measured-in-seconds"},"children":[{"type":"text","value":"A.2.a.5 Time (measured in seconds)"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int8 => 1 LSB => 0.01s"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int16 => 1 LSB => 0.001s"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int32 => 1 LSB => 0.000001s"}]}]},{"type":"element","tag":"h4","props":{"id":"a2a6-position-measured-in-revolutions"},"children":[{"type":"text","value":"A.2.a.6 Position (measured in revolutions)"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int8 => 1 LSB => 0.01 rotation => 3.6 degrees (range of -1.27 to 1.27)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int16 => 1 LSB => 0.0001 rotation => 0.036 degrees (range of -3.2767 to 3.2767)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int32 => 1 LSB => 0.00001 rotation => 0.0036 degrees"}]}]},{"type":"element","tag":"h4","props":{"id":"a2a7-velocity-measured-in-revolutions-s"},"children":[{"type":"text","value":"A.2.a.7 Velocity (measured in revolutions / s)"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int8 => 1 LSB => 0.1Hz / 36 dps"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int16 => 1 LSB => 0.00025 Hz > 0.09 dps"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int32 => 1 LSB => 0.00001 Hz => 0.0036 dps"}]}]},{"type":"element","tag":"h4","props":{"id":"a2a8-acceleration-measured-in-revolutions-s2"},"children":[{"type":"text","value":"A.2.a.8 Acceleration (measured in revolutions / s^2)"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int8 => 1 LSB => 0.05 l/s^2"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int16 => 1 LSB => 0.001 l/s^2"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int32 => 1 LSB => 0.00001 l/s^2"}]}]},{"type":"element","tag":"h4","props":{"id":"a2a9-pwm-and-kpkd-scale-unitless"},"children":[{"type":"text","value":"A.2.a.9 PWM and kp/kd scale (unitless)"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int8 => 1 LSB => (1/127) - 0.007874"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int16 => 1 LSB => (1/32767) - 0.000030519"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"int32 => 1 LSB => (1/2147483647) - 4.657e-10"}]}]},{"type":"element","tag":"h3","props":{"id":"a2b-registers"},"children":[{"type":"text","value":"A.2.b Registers"}]},{"type":"element","tag":"h4","props":{"id":"_0x000-mode"},"children":[{"type":"text","value":"0x000 - Mode"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current operational mode of the servo.  Not all values are valid\nto write."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"0 => stopped = writeable, clears faults"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 => fault"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"2,3,4 => preparing to operate"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"5 => PWM mode"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"6 => voltage mode"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"7 => voltage FOC"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"8 => voltage DQ"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"9 => current"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"10 => position"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"11 => timeout"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"12 => zero velocity"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"13 => stay within"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"14 => measure inductance"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"15 => brake"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When sending a command, this register must be written before any other\nregisters in the command frame."}]},{"type":"element","tag":"h4","props":{"id":"_0x001-position"},"children":[{"type":"text","value":"0x001 - Position"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current position of the servo, measured in rotations of the output\nshaft.  The maximum negative integer is reserved and will not be\nreported."}]},{"type":"element","tag":"h4","props":{"id":"_0x002-velocity"},"children":[{"type":"text","value":"0x002 - Velocity"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current velocity of the servo, measured in Hz at the output shaft."}]},{"type":"element","tag":"h4","props":{"id":"_0x003-torque"},"children":[{"type":"text","value":"0x003 - Torque"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current applied torque as measured at the output shaft."}]},{"type":"element","tag":"h4","props":{"id":"_0x004-measured-q-phase-current"},"children":[{"type":"text","value":"0x004 - Measured Q phase current"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current in the Q phase measured in amperes."}]},{"type":"element","tag":"h4","props":{"id":"_0x005-measured-d-phase-current"},"children":[{"type":"text","value":"0x005 - Measured D phase current"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current in the D phase measured in amperes."}]},{"type":"element","tag":"h4","props":{"id":"_0x006-measured-absolution-position"},"children":[{"type":"text","value":"0x006 - Measured absolution position"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If an absolute encoder is configured on the ABS port, its value will\nbe reported here in revolutions."}]},{"type":"element","tag":"h4","props":{"id":"_0x00a-motor-temperature"},"children":[{"type":"text","value":"0x00a - Motor Temperature"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current motor temperature, measured in degrees celsius.  This will\nonly be valid if a 47k NTC thermistor is connected to the TEMP pads\nand "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.enable_motor_temperature"}]},{"type":"text","value":" is set to 1."}]},{"type":"element","tag":"h4","props":{"id":"_0x00b-trajectory-complete"},"children":[{"type":"text","value":"0x00b - Trajectory complete"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Non-zero if the current acceleration or velocity limited trajectory is\ncomplete, and the controller is following the final velocity."}]},{"type":"element","tag":"h4","props":{"id":"_0x00c-home-state"},"children":[{"type":"text","value":"0x00c - Home state"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"0 - "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"relative only"}]},{"type":"text","value":" - the position is not referenced to anything"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 - "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"rotor"}]},{"type":"text","value":" - the position is referenced to the rotor"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"2 - "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"output"}]},{"type":"text","value":" - the position has been referenced to the output,\neither with an output referenced encoder, or with a \"set output\nnearest\" or \"set output exact\" command"}]}]},{"type":"element","tag":"h4","props":{"id":"_0x00d-voltage"},"children":[{"type":"text","value":"0x00d - Voltage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current input voltage."}]},{"type":"element","tag":"h4","props":{"id":"_0x00e-temperature"},"children":[{"type":"text","value":"0x00e - Temperature"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current board temperature, measured in degrees celsius."}]},{"type":"element","tag":"h4","props":{"id":"_0x00f-fault-code"},"children":[{"type":"text","value":"0x00f - Fault code"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A fault code which will be set if the primary mode is 1 (Fault)."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"32 - "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"calibration fault"}]},{"type":"text","value":" - the encoder was not able to sense a\nmagnet during calibration"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"33 - "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"motor driver fault"}]},{"type":"text","value":" - the most common reason for this is\nundervoltage, moteus attempted to draw more current than the supply\ncould provide.  Other electrical faults may also report this error,\nthe "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"drv8323"}]},{"type":"text","value":" diagnostic tree has more information."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"34 - "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"over voltage"}]},{"type":"text","value":" - the bus voltage exceeded "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.max_voltage"}]},{"type":"text","value":".\nThis can happen due to misconfiguration, or if the controller\nregenerated power with a supply that cannot sink power and no flux\nbraking was configured."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"35 - "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"encoder fault"}]},{"type":"text","value":" - the encoder readings are not consistent with\na magnet being present."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"36 - "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"motor not configured"}]},{"type":"text","value":" - the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"moteus_tool --calibrate"}]},{"type":"text","value":"\nprocedure has not been run on this motor."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"37 - "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"pwm cycle overrun"}]},{"type":"text","value":" - an internal firmware error"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"38 - "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"over temperature"}]},{"type":"text","value":" - the maximum configured temperature has\nbeen exceeded"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"39 - "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"outside limit"}]},{"type":"text","value":" - an attempt was made to start position control\nwhile outside the bounds configured by "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servopos.position_min"}]},{"type":"text","value":" and\n"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servopos.position_max"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"40 - "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"under voltage"}]},{"type":"text","value":" - the voltage was too low"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"41 - "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"config changed"}]},{"type":"text","value":" - a configuration value was changed during\noperation that requires a stop"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"42 - "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"theta invalid"}]},{"type":"text","value":" - no valid commutation encoder is available"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"43 - "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"position invalid"}]},{"type":"text","value":" - no valid output encoder is available"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"44 - "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"stop position deprecated"}]},{"type":"text","value":" - an attempt was made to use the\ndeprecated \"stop position\" feature along with velocity or\nacceleration limits.  Prefer to instead command the desired position\ndirectly with a target velocity of 0.0, or secondarily, disable\nacceleration and velocity limits."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The full list can be found at: "},{"type":"element","tag":"a","props":{"href":"../fw/error.h#L25"},"children":[{"type":"text","value":"fw/error.h"}]}]},{"type":"element","tag":"h3","props":{"id":"_0x010-0x011-0x012-pwm-phase-a-b-c"},"children":[{"type":"text","value":"0x010 / 0x011 / 0x012 - PWM phase A / B / C"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When in Pwm mode, this controls the raw PWM value for phase A, B, and\nC.  If unspecified, 0.0 is used."}]},{"type":"element","tag":"h3","props":{"id":"_0x014-0x15-0x16-voltage-phase-a-b-c"},"children":[{"type":"text","value":"0x014 / 0x15 / 0x16 - Voltage phase A / B / C"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When in Voltage mode, this controls the voltage applied to phase A,\nB, and C.  If unspecified, 0.0 is used."}]},{"type":"element","tag":"h3","props":{"id":"_0x018-voltage-foc-theta"},"children":[{"type":"text","value":"0x018 - Voltage FOC Theta"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When in Voltage Foc mode, this controls the desired electrical phase.\nIntegral types use the PWM mapping.  If unspecified, 0.0 is used."}]},{"type":"element","tag":"h3","props":{"id":"_0x019-voltage-foc-voltage"},"children":[{"type":"text","value":"0x019 - Voltage FOC Voltage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When in Voltage Foc mode, this controls the desired applied phase\nvoltage.  If unspecified, 0.0 is used."}]},{"type":"element","tag":"h3","props":{"id":"_0x01a-d-voltage"},"children":[{"type":"text","value":"0x01a - D Voltage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When in Voltage Dq mode, this controls the desired applied D voltage.\nIf unspecified, 0.0 is used."}]},{"type":"element","tag":"h3","props":{"id":"_0x01b-q-voltage"},"children":[{"type":"text","value":"0x01b - Q Voltage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When in kVoltageDq mode, this controls the desired applied Q voltage.\nIf unspecified, 0.0 is used."}]},{"type":"element","tag":"h3","props":{"id":"_0x01c-commanded-q-phase-current"},"children":[{"type":"text","value":"0x01c - Commanded Q Phase Current"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When in Current mode, this controls the desired Q phase current.  If\nunspecified, 0.0 is used."}]},{"type":"element","tag":"h3","props":{"id":"_0x01d-commanded-d-phase-current"},"children":[{"type":"text","value":"0x01d - Commanded D Phase Current"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When in Current mode, this controls the desired D phase current.  Unless\nyou like burning power, with a BLDC motor you will typically want this\nset to 0.  If unspecified, 0.0 is used."}]},{"type":"element","tag":"h3","props":{"id":"_0x1e-voltage-foc-theta-rate"},"children":[{"type":"text","value":"0x1e - Voltage FOC Theta Rate"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When in Voltage Foc mode, this controls the rate of change of\nelectrical phase.  Integral types use the velocity mapping."}]},{"type":"element","tag":"h4","props":{"id":"_0x020-position-command"},"children":[{"type":"text","value":"0x020 - Position command"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When in Position mode, this controls the desired position."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The maximally negative integer, or NaN for float represents, \"use the\ncurrent position value\"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If unspecified, 0.0 is used."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note, in the absence of any configured or commanded velocity or\nacceleration limits, the controller will attempt to achieve this\nposition "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"right now"}]},{"type":"text","value":" subject to the kp and kd constants."}]},{"type":"element","tag":"h4","props":{"id":"_0x021-velocity-command"},"children":[{"type":"text","value":"0x021 - Velocity command"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When in Position mode, advance the desired position at the given\nvelocity in Hz."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As a special case, if the 0x020 position is unset, and 0x026 stop\nposition is set, the sign of this is ignored, and is instead selected\nso that the motor will move towards the stop position."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The maximally negative integer, or NaN for float, is treated the same\nas 0.0."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If unspecified, 0.0 is used."}]},{"type":"element","tag":"h4","props":{"id":"_0x022-feedforward-torque"},"children":[{"type":"text","value":"0x022 - Feedforward torque"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When in Position mode, add the given feedforward torque after applying\nall regular control loops.  Note, this is torque at the output shaft.\nIf unspecified, 0.0 is used."}]},{"type":"element","tag":"h4","props":{"id":"_0x023-kp-scale"},"children":[{"type":"text","value":"0x023 - Kp scale"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When in Position mode, shrink the proportional control term by the\ngiven factor.  Integral types are applied as for PWM.  If unspecified,\n1.0 is used."}]},{"type":"element","tag":"h4","props":{"id":"_0x024-kd-scale"},"children":[{"type":"text","value":"0x024 - Kd scale"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When in Position mode, shrink the derivative control term by the given\nfactor.  Integral types are applied as for PWM.  This is internally\nlimited to be no more than the kp scale.  If unspecified, 1.0 is used."}]},{"type":"element","tag":"h4","props":{"id":"_0x025-maximum-torque"},"children":[{"type":"text","value":"0x025 - Maximum torque"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When in Position mode, the maximum torque to be applied.  If\nunspecified, this defaults to the system-wide configured maximum\ntorque."}]},{"type":"element","tag":"h4","props":{"id":"_0x026-commanded-stop-position"},"children":[{"type":"text","value":"0x026 - Commanded stop position"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When in Position mode, and a non-zero velocity is commanded, stop\nmotion when reaching the given position.  NaN / maximally negative\nmeans no limit is applied.  If unspecified, NaN is used."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note, if the controller is ever commanded to move "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"away"}]},{"type":"text","value":" from the stop\nposition, say with a velocity command that is inconsistent with the\nstart and stop position, then it will act as if a 0 velocity has been\ncommanded and the current command position equals the stop position."}]},{"type":"element","tag":"h4","props":{"id":"_0x027-watchdog-timeout"},"children":[{"type":"text","value":"0x027 - Watchdog timeout"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This determines the length of time for which this command is valid.\nIf this timeout expires before another command is received, the\ncontroller will enter the Timeout state.  The default is 0.0, which\nmeans to use the system-wide configured default.  NaN / maximally\nnegative means apply no enforced timeout."}]},{"type":"element","tag":"h4","props":{"id":"_0x028-velocity-limit"},"children":[{"type":"text","value":"0x028 - Velocity limit"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This can be used to override the global velocity limit for internally\ngenerated trajectories.  If unspecified, it is NaN / maximally\nnegative, which implies to use the global configurable default."}]},{"type":"element","tag":"h4","props":{"id":"_0x029-acceleration-limit"},"children":[{"type":"text","value":"0x029 - Acceleration limit"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This can be used to override the global acceleration limit for\ninternally generated trajectories.  If unspecified, it is NaN /\nmaximally negative, which implies to use the global configurable\ndefault."}]},{"type":"element","tag":"h4","props":{"id":"_0x02a-fixed-voltage-override"},"children":[{"type":"text","value":"0x02a - Fixed voltage override"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If specified and not-NaN, then the control mode will temporarily be in\nthe \"fixed voltage\" mode, regardless of the current setting of\n"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.fixed_voltage_mode"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"_0x030-proportional-torque"},"children":[{"type":"text","value":"0x030 - Proportional torque"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This reports the torque contribution from the proportional term in the\nPID controller."}]},{"type":"element","tag":"h3","props":{"id":"_0x031-integral-torque"},"children":[{"type":"text","value":"0x031 - Integral torque"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This reports the torque contribution from the integral term in the\nPID controller."}]},{"type":"element","tag":"h3","props":{"id":"_0x032-derivative-torque"},"children":[{"type":"text","value":"0x032 - Derivative torque"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This reports the torque contribution from the derivative term in the\nPID controller."}]},{"type":"element","tag":"h3","props":{"id":"_0x033-feedforward-torque"},"children":[{"type":"text","value":"0x033 - Feedforward torque"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This reports the feedforward contribution in the PID controller."}]},{"type":"element","tag":"h3","props":{"id":"_0x034-total-control-torque"},"children":[{"type":"text","value":"0x034 - Total control torque"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This reports the total commanded torque from the position mode\ncontroller.  This is also reported in 0x03a."}]},{"type":"element","tag":"h3","props":{"id":"_0x038-control-position"},"children":[{"type":"text","value":"0x038 - Control Position"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This reports the current trajectory control position, in modes where\nthat is valid.  When velocity or acceleration limiting is enabled, the\ncontrol position will follow the desired limits to achieve the command\nposition."}]},{"type":"element","tag":"h3","props":{"id":"_0x039-control-velocity"},"children":[{"type":"text","value":"0x039 - Control Velocity"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This reports the current velocity control value, in modes where that\nis valid.  When velocity or acceleration limiting is enabled, the\ncontrol velocity will follow the desired limits to achieve the control\nposition and velocity."}]},{"type":"element","tag":"h3","props":{"id":"_0x03a-control-torque"},"children":[{"type":"text","value":"0x03a - Control Torque"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The torque commanded by the control loop.  This is the same as 0x034."}]},{"type":"element","tag":"h3","props":{"id":"_0x03b-position-error"},"children":[{"type":"text","value":"0x03b - Position Error"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current sensed position minus the control position."}]},{"type":"element","tag":"h3","props":{"id":"_0x03c-velocity-error"},"children":[{"type":"text","value":"0x03c - Velocity Error"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current sensed velocity minus the control velocity."}]},{"type":"element","tag":"h3","props":{"id":"_0x03d-torque-error"},"children":[{"type":"text","value":"0x03d - Torque Error"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current sensed torque minus the control torque."}]},{"type":"element","tag":"h3","props":{"id":"_0x040-stay-within-lower-bound"},"children":[{"type":"text","value":"0x040 - Stay within lower bound"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When in Stay Within mode, this controls the minimum allowable\nposition.  The maximally negative integer or NaN for float represents,\n\"there is no lower bound\".  When special or the position is above this\nbound (and also respecting the optional upper bound), only a\nfeedforward torque is applied.  When outside this bound, the PID\ncontroller is used to force the position back to the bound.  If\nunspecified, 0.0 is used."}]},{"type":"element","tag":"h3","props":{"id":"_0x041-stay-within-upper-bound"},"children":[{"type":"text","value":"0x041 - Stay within upper bound"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When in Stay Within mode, this controls the maximum allowable\nposition.  The maximally negative integer, or NaN for float\nrepresents, \"there is no upper bound\". When special or the position is\nbelow this bound (and also respecting the optional lower bound), only\na feedforward torque is applied.  When outside this bound, the PID\ncontroller is used to force the position back to the bound.  If\nunspecified, 0.0 is used."}]},{"type":"element","tag":"h3","props":{"id":"_0x042-feedforward-torque"},"children":[{"type":"text","value":"0x042 - Feedforward torque"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A shadow of the 0x022 register."}]},{"type":"element","tag":"h3","props":{"id":"_0x043-kp-scale"},"children":[{"type":"text","value":"0x043 - Kp scale"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A shadow of the 0x023 register."}]},{"type":"element","tag":"h3","props":{"id":"_0x044-kd-scale"},"children":[{"type":"text","value":"0x044 - Kd scale"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A shadow of the 0x024 register."}]},{"type":"element","tag":"h3","props":{"id":"_0x045-maximum-torque"},"children":[{"type":"text","value":"0x045 - Maximum torque"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A shadow of the 0x025 register."}]},{"type":"element","tag":"h3","props":{"id":"_0x046-watchdog-timeout"},"children":[{"type":"text","value":"0x046 - Watchdog timeout"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A shadow of the 0x027 register."}]},{"type":"element","tag":"h3","props":{"id":"_0x050-encoder-0-position"},"children":[{"type":"text","value":"0x050 - Encoder 0 Position"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Reports the current filtered position of the encoder configured in\nslot 0."}]},{"type":"element","tag":"h3","props":{"id":"_0x051-encoder-0-velocity"},"children":[{"type":"text","value":"0x051 - Encoder 0 Velocity"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Reports the current filtered velocity of the encoder configured in\nslot 0."}]},{"type":"element","tag":"h3","props":{"id":"_0x052-encoder-1-position"},"children":[{"type":"text","value":"0x052 - Encoder 1 Position"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Reports the current filtered position of the encoder configured in\nslot 1."}]},{"type":"element","tag":"h3","props":{"id":"_0x053-encoder-1-velocity"},"children":[{"type":"text","value":"0x053 - Encoder 1 Velocity"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Reports the current filtered velocity of the encoder configured in\nslot 1."}]},{"type":"element","tag":"h3","props":{"id":"_0x054-encoder-2-position"},"children":[{"type":"text","value":"0x054 - Encoder 2 Position"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Reports the current filtered position of the encoder configured in\nslot 2."}]},{"type":"element","tag":"h3","props":{"id":"_0x055-encoder-2-velocity"},"children":[{"type":"text","value":"0x055 - Encoder 2 Velocity"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Reports the current filtered velocity of the encoder configured in\nslot 2."}]},{"type":"element","tag":"h3","props":{"id":"_0x058-encoder-validity"},"children":[{"type":"text","value":"0x058 - Encoder Validity"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Returns a bitfield, where bit 0 indicates whether encoder 0 is active,\nbit 1 indicates whether encoder 1 is active, etc."}]},{"type":"element","tag":"h3","props":{"id":"_0x05c-aux1-gpio-command"},"children":[{"type":"text","value":"0x05c - Aux1 GPIO Command"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current output command for any GPIOs configured as an output on\naux1 as a bitfield.  Not all bits may be used, as bit 0 is always for\npin 1, whether or not it is configured as a GPIO output."}]},{"type":"element","tag":"h3","props":{"id":"_0x05d-aux2-gpio-command"},"children":[{"type":"text","value":"0x05d - Aux2 GPIO Command"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current output command for any GPIOs configured as an output on\naux2 as a bitfield.  Not all bits may be used, as bit 0 is always for\npin 1, whether or not it is configured as a GPIO output."}]},{"type":"element","tag":"h3","props":{"id":"_0x05e-aux1-gpio-status"},"children":[{"type":"text","value":"0x05e - Aux1 GPIO Status"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current input value of any GPIOs configured as an input on aux1 as\na bitfield.  Not all bits may be used, as bit 0 is always for pin 1,\nwhether or not it is configured as a GPIO input."}]},{"type":"element","tag":"h3","props":{"id":"_0x05f-aux2-gpio-status"},"children":[{"type":"text","value":"0x05f - Aux2 GPIO Status"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current input value of any GPIOs configured as an input on aux2 as\na bitfield.  Not all bits may be used, as bit 0 is always for pin 1,\nwhether or not it is configured as a GPIO input."}]},{"type":"element","tag":"h3","props":{"id":"_0x0600x064-aux1-analog-inputs"},"children":[{"type":"text","value":"0x060/0x064 - Aux1 Analog Inputs"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current input value of any analog inputs configured on aux1.  The\nregisters are associated with pins 1-5, regardless of whether they are\nconfigured as an analog input.  Each value is scaled as a PWM from 0\nto 1."}]},{"type":"element","tag":"h3","props":{"id":"_0x0680x06c-aux2-analog-inputs"},"children":[{"type":"text","value":"0x068/0x06c - Aux2 Analog Inputs"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current input value of any analog inputs configured on aux2.  The\nregisters are associated with pins 1-5, regardless of whether they are\nconfigured as an analog input.  Each value is scaled as a PWM from 0\nto 1."}]},{"type":"element","tag":"h3","props":{"id":"_0x070-millisecond-counter"},"children":[{"type":"text","value":"0x070 - Millisecond Counter"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Increments once per millisecond.  It wraps at the maximum value for\nthe queried type to the minimum value for that type.  For floating\npoint types, it counts integers from 0 to 8388608."}]},{"type":"element","tag":"h3","props":{"id":"_0x071-clock-trim"},"children":[{"type":"text","value":"0x071 - Clock Trim"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read/write"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"An integer which can trim the clock rate of the microprocessor on the\nmoteus controller.  Positive values speed it up and negative values\nslow it down.  Each integer step roughly corresponds to a 0.25% change\nin speed."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"WARNING: Changing the speed affects all processes driven by the\nmicrocontroller, including CAN communication.  Thus setting this to a\nnon-zero value may prevent future CAN communications."}]},{"type":"element","tag":"h3","props":{"id":"_0x100-model-number"},"children":[{"type":"text","value":"0x100 - Model Number"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Name: Model Number\nMode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This returns a 32 bit model number."}]},{"type":"element","tag":"h3","props":{"id":"_0x101-firmware-version"},"children":[{"type":"text","value":"0x101 - Firmware Version"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This returns a 32 bit firmware version, encoded bytewise as\nmajor.minor.micro.  i.e. 0x010304 is version 1.3.4"}]},{"type":"element","tag":"h3","props":{"id":"_0x102-register-map-version"},"children":[{"type":"text","value":"0x102 - Register map version"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This returns a number that indicates how to interpret all registers."}]},{"type":"element","tag":"h3","props":{"id":"_0x110-multiplex-id"},"children":[{"type":"text","value":"0x110 - Multiplex ID"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Name: Multiplex ID\nMode: Configurable"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This controls the primary ID used to access the device over the\nmultiplex RS485 bus.  It can only be between 1 and 127.  (0 is\nreserved as the broadcast address)."}]},{"type":"element","tag":"h3","props":{"id":"_0x120-0x122-serial-number"},"children":[{"type":"text","value":"0x120 - 0x122 - Serial Number"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Name: Serial Number\nMode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This returns a 96 bit serial number, least significant word first."}]},{"type":"element","tag":"h3","props":{"id":"_0x130-set-output-nearest"},"children":[{"type":"text","value":"0x130 - Set Output Nearest"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Write only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When sent, this causes the servo to select a whole number of internal\nmotor rotations so that the final position is as close to the given\nposition as possible."}]},{"type":"element","tag":"h3","props":{"id":"_0x131-set-output-exact"},"children":[{"type":"text","value":"0x131 - Set Output Exact"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Write only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When sent, the servo will force the output position to be the exact\nspecified value."}]},{"type":"element","tag":"h3","props":{"id":"_0x132-require-reindex"},"children":[{"type":"text","value":"0x132 - Require Reindex"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Write only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When sent with any value, the servo will require that any index\nposition be re-located before control can begin.  Regardless, the\nposition will reset to an arbitrary value consistent with the current\nencoder settings."}]},{"type":"element","tag":"h3","props":{"id":"_0x140-driver-fault-1"},"children":[{"type":"text","value":"0x140 - Driver Fault 1"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The exact bitfield reported by the motor driver in fault conditions\nfor fault register 1.  Up to 16 bits may be set.  This will only be\nnon-zero if the current mode is fault (1) and the fault code is 33\n(motor driver fault)."}]},{"type":"element","tag":"h3","props":{"id":"_0x141-driver-fault-2"},"children":[{"type":"text","value":"0x141 - Driver Fault 2"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mode: Read only."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The exact bitfield reported by the motor driver in fault conditions\nfor fault register 2.  Up to 16 bits may be set.  This will only be\nnon-zero if the current mode is fault (1) and the fault code is 33\n(motor driver fault)."}]},{"type":"element","tag":"h2","props":{"id":"a3-example"},"children":[{"type":"text","value":"A.3 Example"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A single CAN-FD frame can be used to command the servo, and initiate a\nquery of certain registers.  An example frame might look like the\nfollowing, encoded in hex with annotations."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"01"}]},{"type":"text","value":" - write a single int8 register (number of registers is encoded\nin the 2 LSBs)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"00"}]},{"type":"text","value":" - start register number \"Mode\""}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"0a"}]},{"type":"text","value":" - \"position\" mode"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"07"}]},{"type":"text","value":" - write 3x int16 registers (number of registers is encoded in\nthe 2 LSBs)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"20"}]},{"type":"text","value":" - register 0x020"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"6000"}]},{"type":"text","value":" - position = 0x0060 = 96 = 3.456 degrees"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"2001"}]},{"type":"text","value":" - velocity = 0x0120 = 288 = 25.92 dps"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"50ff"}]},{"type":"text","value":" - feedforward torque = 0xff50 = -176 = 1.76 N*m"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"14"}]},{"type":"text","value":" - read int16 registers"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"04"}]},{"type":"text","value":" - read 4 registers"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"00"}]},{"type":"text","value":" - starting at 0x000 (so 0x000 Mode, 0x001 Position, 0x002\nVelocity, 0x003 Torque)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"13"}]},{"type":"text","value":" - read 3x int8 registers"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"0d"}]},{"type":"text","value":" - starting at 0x00d (so 0x00d Voltage, 0x00e Temperature,\n0x00f Fault code)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Thus the whole CAN-FD message would be (in hex):"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"01000a07206000200150ff140400130d"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To send this using the fdcanusb converter to a device configured at\nthe default address of 1, you could write."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"can send 8001 01000a07206000200150ff140400130d"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"80"}]},{"type":"text","value":" in ID is used for two purposes.  The high bit being set\nforces the device to respond (otherwise it will not respond, even if\nquery commands are sent).  The remaining bits are the \"ID\" to respond\nto.  In response to this command, a possible response from the servo\nwould look like:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"rcv 100 2404000a005000000170ff230d181400"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Decoded, that means:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"100"}]},{"type":"text","value":" from device \"1\" to device \"0\""}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"24"}]},{"type":"text","value":" reply with int16 values"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"04"}]},{"type":"text","value":" 4 registers"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"00"}]},{"type":"text","value":" starting at register 0"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"0a00"}]},{"type":"text","value":" in mode 10 - Position"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"5000"}]},{"type":"text","value":" position is 0x0050 = 80 = 2.88 degrees"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"0001"}]},{"type":"text","value":" velocity is 0x0100 = 256 = 23.04 dps"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"70ff"}]},{"type":"text","value":" torque is 0xff70 = -144 = -1.44 Nm"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"23"}]},{"type":"text","value":" reply with 3 int8 values"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"0d"}]},{"type":"text","value":" starting at register 0x00d"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"18"}]},{"type":"text","value":" voltage is 12V"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"14"}]},{"type":"text","value":" temperature is 20C"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"00"}]},{"type":"text","value":" no fault"}]}]},{"type":"element","tag":"h1","props":{"id":"b-diagnostic-command-set"},"children":[{"type":"text","value":"B. diagnostic command set"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The following command set is intended for debugging and diagnostics.\nIt can be entered from "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"tview"}]},{"type":"text","value":" or the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"--console"}]},{"type":"text","value":" mode of\n"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"multiplex_tool"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"moteus_tool"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"b1-d-board-debug"},"children":[{"type":"text","value":"B.1 "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d"}]},{"type":"text","value":" - board debug"}]},{"type":"element","tag":"h3","props":{"id":"d-stop"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d stop"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This causes the controller to enter the \"stopped\" state, which\ndisables the motor driver."}]},{"type":"element","tag":"h3","props":{"id":"d-raw"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d raw"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This enters the \"raw\" PWM mode.  Syntax:"}]},{"type":"element","tag":"pre","props":{"code":"d raw <pwm_a> <pwm_b> <pwm_c>\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"d raw <pwm_a> <pwm_b> <pwm_c>\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Where the pwm values are between 0.0 and 1.0.  A command to the idle\nstate is thus: "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d raw 0.5 0.5 0.5"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"d-pwm"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d pwm"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This enters voltage-FOC mode.  Syntax:"}]},{"type":"element","tag":"pre","props":{"code":"d pwm <phase> <magnitude> [<phase_rate>]\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"d pwm <phase> <magnitude> [<phase_rate>]\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Where phase is in radians, magnitude is in volts, and the optional\nphase rate is in radians per second."}]},{"type":"element","tag":"h3","props":{"id":"d-dq"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d dq"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This enters the current controlled FOC mode.  Syntax:"}]},{"type":"element","tag":"pre","props":{"code":"d dq <d_A> <q_A>\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"d dq <d_A> <q_A>\n"}]}]},{"type":"element","tag":"h3","props":{"id":"d-pos"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d pos"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This enters the position control FOC mode.  Syntax:"}]},{"type":"element","tag":"pre","props":{"code":"d pos <pos> <vel> <max_torque> [options...]\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"d pos <pos> <vel> <max_torque> [options...]\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Each optional element consists of a prefix character followed by a value.  Permissible options are:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"p"}]},{"type":"text","value":" - kp scale: the configured kp value is multiplied by this\nconstant for the duration of this command"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d"}]},{"type":"text","value":" - kd scale: the configured kd value is multiplied by this\nconstant for the duration of this command"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"s"}]},{"type":"text","value":" - stop position: when a non-zero velocity is given, motion stops\nwhen the control position reaches this value."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"f"}]},{"type":"text","value":" - feedforward torque in Nm"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"t"}]},{"type":"text","value":" - timeout: If another command is not received in this many\nseconds, enter the timeout mode."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"v"}]},{"type":"text","value":" - velocity limit: the given value will override the global\nvelocity limit for the duration of this command."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"a"}]},{"type":"text","value":" - acceleration limit: the given value will override the global\nacceleration limit for the duration of this command."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"o"}]},{"type":"text","value":" - fixed voltage override: while in affect, treat the control as\nif "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"fixed_voltage_mode"}]},{"type":"text","value":" were enabled with the given voltage"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The position, velocity, maximum torque, and all optional fields have\nthe same semantics as for the register protocol documented above."}]},{"type":"element","tag":"h3","props":{"id":"d-tmt"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d tmt"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Enter the timeout mode.  This mode commands a zero velocity and can only be exited through the stopped state."}]},{"type":"element","tag":"pre","props":{"code":"d tmt <pos> <vel> <max_torque> [options...]\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"d tmt <pos> <vel> <max_torque> [options...]\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Available options are identical to "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d pos"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"d-zero"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d zero"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Enter the zero velocity state.  A zero velocity is commanded\nregardless of position."}]},{"type":"element","tag":"pre","props":{"code":"d zero <pos> <vel> <max_torque> [options...]\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"d zero <pos> <vel> <max_torque> [options...]\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Available options are identical to "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d pos"}]},{"type":"text","value":".  "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"pos"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"vel"}]},{"type":"text","value":" are\nignored."}]},{"type":"element","tag":"h3","props":{"id":"d-within"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d within"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Enter the \"stay within\" state.  When the position is contained within\nthe given bounds, only the feedforward torque is applied.  Otherwise,\nthe position mode controller is used to hold the position at the\nviolated boundary."}]},{"type":"element","tag":"pre","props":{"code":"d within <lowbound> <highbound> <max_torque> [options...]\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"d within <lowbound> <highbound> <max_torque> [options...]\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The fields have the same semantics as for the register protocol\ndocumented above.  The options are the same as for "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d pos"}]},{"type":"text","value":", with the\nexception of stop position which is not supported."}]},{"type":"element","tag":"h3","props":{"id":"d-brake"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d brake"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Enter the \"brake\" state.  In this mode, all motor phases are shorted\nto ground, resulting in a passive \"braking\" action."}]},{"type":"element","tag":"h3","props":{"id":"d-nearest"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d nearest"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Update the current position to the closest one which is consistent\nwith a given output position."}]},{"type":"element","tag":"pre","props":{"code":"d rezero <position>\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"d rezero <position>\n"}]}]},{"type":"element","tag":"h3","props":{"id":"d-exact"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d exact"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Update the current position to exactly the given value."}]},{"type":"element","tag":"pre","props":{"code":"d exact <position>\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"d exact <position>\n"}]}]},{"type":"element","tag":"h3","props":{"id":"d-req-reindex"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d req-reindex"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Reset the homing state to relative based, requiring any homing\nprocedure to be re-run."}]},{"type":"element","tag":"pre","props":{"code":"d req-reindex\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"d req-reindex\n"}]}]},{"type":"element","tag":"h3","props":{"id":"d-cfg-set-output"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d cfg-set-output"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Modify the configuration as required so that the current observed\nposition will be equal to the given value.  Note, the configuration is\nnot written to persistent storage."}]},{"type":"element","tag":"pre","props":{"code":"d cfg-set-output <position>\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"d cfg-set-output <position>\n"}]}]},{"type":"element","tag":"h3","props":{"id":"d-cal"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d cal"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"INTERNAL moteus_tool USE ONLY: Enter the encoder calibration mode.\nUpon starting this command, the controller will spin the motor in\nvoltage-FOC mode until the encoder covers a full revolution, then\nrepeat the process in the other direction.  During the process, the\ncurrent commanded phase and encoder value are periodically emitted to\nthe console."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Syntax:"}]},{"type":"element","tag":"pre","props":{"code":"d cal <magnitude> [options...]\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"d cal <magnitude> [options...]\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Each optional element consists of a prefix character followed by a value.  Permissible options are:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"s"}]},{"type":"text","value":" - calibration speed in electrical revolutions per second"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"NOTE: This command is for internal moteus_tool use only.  It performs\nonly part of the calibration process, and saves nothing to the\npersistent storage."}]},{"type":"element","tag":"h3","props":{"id":"d-flash"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d flash"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Enter the bootloader."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"NOTE: This is only intended for internal use.  Users who want to flash new firmware should use "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"moteus_tool"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"b2-aux12-aux-port-manipulation"},"children":[{"type":"text","value":"B.2 "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12]"}]},{"type":"text","value":" - Aux port manipulation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All commands are supported on both "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux1"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux2"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"aux1-out-set-gpio-output-values"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux1 out"}]},{"type":"text","value":" - Set GPIO Output Values"}]},{"type":"element","tag":"pre","props":{"code":"aux1 out <data>\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"aux1 out <data>\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"'data' is a single decimal integer.  Only bits associated with pins\nconfigured as digital outputs are used, the remainder are ignored."}]},{"type":"element","tag":"h3","props":{"id":"aux1-ic-cmd-initiate-an-ic-pz-command"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux1 ic-cmd"}]},{"type":"text","value":" - Initiate an iC-PZ command"}]},{"type":"element","tag":"pre","props":{"code":"aux1 ic-cmd <HEXBYTE>\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"aux1 ic-cmd <HEXBYTE>\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"An example of entering analog mode calibration."}]},{"type":"element","tag":"pre","props":{"code":"aux1 ic-cmd B0\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"aux1 ic-cmd B0\n"}]}]},{"type":"element","tag":"h3","props":{"id":"aux1-ic-wr-write-ic-pz-register"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux1 ic-wr"}]},{"type":"text","value":" - Write iC-PZ register"}]},{"type":"element","tag":"pre","props":{"code":"aux1 ic-wr <reg> <data>\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"aux1 ic-wr <reg> <data>\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Register is one byte in hex, data is 1 or more bytes in hex."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Example of switching to memory page 0."}]},{"type":"element","tag":"pre","props":{"code":"aux1 ic-wr 40 00\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"aux1 ic-wr 40 00\n"}]}]},{"type":"element","tag":"h3","props":{"id":"aux1-ic-rd-read-ic-pz-register"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux1 ic-rd"}]},{"type":"text","value":" - Read iC-PZ register"}]},{"type":"element","tag":"pre","props":{"code":"aux1 ic-rd <reg> <length>\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"aux1 ic-rd <reg> <length>\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The register is one byte in hex, length is a decimal value indicating\nthe number of bytes to read."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Example of reading the temperature data:"}]},{"type":"element","tag":"pre","props":{"code":"aux1 ic-rd 4e 2\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"aux1 ic-rd 4e 2\n"}]}]},{"type":"element","tag":"h3","props":{"id":"aux1-ic-extra-select-alternate-periodic-data"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux1 ic-extra"}]},{"type":"text","value":" - Select alternate periodic data"}]},{"type":"element","tag":"pre","props":{"code":"aux1 ic-extra <fields>\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"aux1 ic-extra <fields>\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"\"fields\" is a decimal bitmask of items to read at 1000Hz and display\nin the diagnostic stream."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"bit 0 - the diagnosis command result\nbit 1 - the contents of the AI_PHASES registers"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Example of enabling the AI_PHASES registers only:"}]},{"type":"element","tag":"pre","props":{"code":"aux1 ic-extra 2\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"aux1 ic-extra 2\n"}]}]},{"type":"element","tag":"h2","props":{"id":"b3-tel-telemetry"},"children":[{"type":"text","value":"B.3 "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"tel"}]},{"type":"text","value":" - telemetry"}]},{"type":"element","tag":"h3","props":{"id":"tel-get"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"tel get"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Retrieve the contents of a given channel.  Text or binary mode is\ndetermined via the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"tel fmt"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"tel text"}]},{"type":"text","value":" commands, and defaults to\nbinary mode."}]},{"type":"element","tag":"pre","props":{"code":"tel get <channel>\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"tel get <channel>\n"}]}]},{"type":"element","tag":"h3","props":{"id":"tel-list"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"tel list"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"List all available telemetry channels."}]},{"type":"element","tag":"h3","props":{"id":"tel-schema"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"tel schema"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Report the binary schema associated with the given channel."}]},{"type":"element","tag":"pre","props":{"code":"tel schema <channel>\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"tel schema <channel>\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The schema is reported as follows:"}]},{"type":"element","tag":"pre","props":{"code":"emit <channel>\\r\\n\n<LE uint32 size><data>\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"emit <channel>\\r\\n\n<LE uint32 size><data>\n"}]}]},{"type":"element","tag":"h3","props":{"id":"tel-rate"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"tel rate"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Control the rate at which a given channel is emitted."}]},{"type":"element","tag":"pre","props":{"code":"tel rate <channel> <rate_ms>\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"tel rate <channel> <rate_ms>\n"}]}]},{"type":"element","tag":"h3","props":{"id":"tel-fmt"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"tel fmt"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Select whether a given channel will be emitted in binary or text form."}]},{"type":"element","tag":"pre","props":{"code":"tel fmt <channel> <format>\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"tel fmt <channel> <format>\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"format"}]},{"type":"text","value":" is an integer, non-zero signifies the data should be emitted\nas text."}]},{"type":"element","tag":"h3","props":{"id":"tel-stop"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"tel stop"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Stop emitting all periodic telemetry data."}]},{"type":"element","tag":"h3","props":{"id":"tel-text"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"tel text"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Switch all channels to text mode."}]},{"type":"element","tag":"h2","props":{"id":"b4-conf-configuration"},"children":[{"type":"text","value":"B.4 "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"conf"}]},{"type":"text","value":" - configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"NOTE: Any commands that change parameters, such as "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"conf set"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"conf load"}]},{"type":"text","value":", or "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"conf default"}]},{"type":"text","value":", if executed manually in "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"tview"}]},{"type":"text","value":" will not\nautomatically update the UI.  "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"tview"}]},{"type":"text","value":" must be restarted to display the\nnew parameters in the UI."}]},{"type":"element","tag":"h3","props":{"id":"conf-enumerate"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"conf enumerate"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Print the current value of all configurable parameters."}]},{"type":"element","tag":"h3","props":{"id":"conf-get"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"conf get"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Get the value of a single configurable parameter."}]},{"type":"element","tag":"pre","props":{"code":"conf get <item>\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"conf get <item>\n"}]}]},{"type":"element","tag":"h3","props":{"id":"conf-set"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"conf set"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Set the value of a single configurable parameter in RAM."}]},{"type":"element","tag":"pre","props":{"code":"conf set <item> <value>\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"conf set <item> <value>\n"}]}]},{"type":"element","tag":"h3","props":{"id":"conf-load"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"conf load"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Load all configurable values from persistent storage.  This will\noverwrite their current values in RAM."}]},{"type":"element","tag":"h3","props":{"id":"conf-write"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"conf write"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Write the current value of all configurable parameters from RAM to\npersistent storage."}]},{"type":"element","tag":"h3","props":{"id":"conf-default"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"conf default"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Update the RAM values of all configurable parameters to their firmware\ndefault."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"NOTE: This only updates RAM, not the persistent storage.  A "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"conf write"}]},{"type":"text","value":" will be necessary to save these to persistant storage."}]},{"type":"element","tag":"h1","props":{"id":"c-configurable-values"},"children":[{"type":"text","value":"C. Configurable values"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This section describes the configurable values which are most likely\nto be modified for end-user applications.  Changes to all values take\neffect "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"immediately"}]},{"type":"text","value":".  This may mean, that for instance, it is wise to\nstop control loops before drastically changing control parameters.  Or\nmaybe not, it depends upon your goals."}]},{"type":"element","tag":"h2","props":{"id":"idid"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"id.id"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The servo ID presented on the CAN bus.  After this is modified, you need to immediately adjust which servo ID you communicate with in order to continue communication or save the parameters."}]},{"type":"element","tag":"h2","props":{"id":"canprefix"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"can.prefix"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A 13 bit integer used as the upper 13 bits for the ID of all CAN\ncommunication.  As with "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"id.id"}]},{"type":"text","value":" this takes effect immediately, so\nafter changing it, communication must be restarted with the correct\nprefix in order to do things like save the configuration."}]},{"type":"element","tag":"h2","props":{"id":"servoposposition_min"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servopos.position_min"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The minimum allowed control position value, measured in rotations.  If\nNaN, then no limit is applied."}]},{"type":"element","tag":"h2","props":{"id":"servoposposition_max"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servopos.position_max"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The maximum allowed control position value, measured in rotations.  If\nNaN, then no limit is applied."}]},{"type":"element","tag":"h2","props":{"id":"servopid_position"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.pid_position"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"These configure the position mode PID controller."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"kp/ki/kd"}]},{"type":"text","value":" - PID gains with units of:\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"kp - Nm per rotation"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ki - Nm/s per rotation"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"kd - Nm per rotation/s"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"iratelimit"}]},{"type":"text","value":" - The maximum rate at which the integral term can\nwind up, in N*m/s.  <0 means \"no limit\""}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"ilimit"}]},{"type":"text","value":" - The total maximum I term, in Nm"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"max_desired_rate"}]},{"type":"text","value":" - If non-zero, the commanded position is\nlimited to change at this rate in Hz."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note, these values are in physical units.  Thus a "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"kp"}]},{"type":"text","value":" value of 1,\nmeans that for 1 revolution of error at the output, 1 Nm of corrective\ntorque will be applied.  Similarly, with a "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"kd"}]},{"type":"text","value":" value of 1, 1\nrevolution per second of error will result in 1 Nm of corrective\ntorque.  Doubly note that these values are measured at the output,\nthus "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"after"}]},{"type":"text","value":" any scaling in position, velocity, and torque implied by\n"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.rotor_to_output_ratio"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"servopid_dq"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.pid_dq"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"These have the same semantics as the position mode PID controller, and\naffect the current control loop."}]},{"type":"element","tag":"h2","props":{"id":"servodefault_velocity_limit-servodefault_accel_limit"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.default_velocity_limit"}]},{"type":"text","value":" / "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.default_accel_limit"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Limits to be placed on trajectories generated within moteus.  If\neither is "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"nan"}]},{"type":"text","value":", then that limit is unset.  The limits may also be\noverriden individually on a per command basis.  The semantics of the\nlimits are as follows:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Neither set (both nan)"}]},{"type":"text","value":" In this case, position and velocity\ncommands take immediate effect.  The control position will be\ninitialized to the command position, and the control velocity will\nbe set to the command velocity.  The control position will advance\nat the given velocity indefinitely, or until the command stop\nposition is reached."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Either set"}]},{"type":"text","value":": If x_c is the command position, v_c is the command\nvelocity, and t is the time from receipt of the command, the\nsemantics can be described as: \"match the trajectory defined by x =\nx_c + v_c * t\"."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"If the acceleration limit is set, the above is effected by\ncommanding accelerations of either "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"-accel_limit, 0, accel_limit"}]},{"type":"text","value":".\nIf an acceleration limit is not set, then the velocity will change\ninstantaneously."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"If the velocity limit is set, then the intermediate velocities will\nobey \"-velocity_limit < velocity < +velocity_limit\".  If it is not\nset, then the velocities may grow to arbitrary magnitude."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"NOTE: This is limited internally to be no more than\n"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.max_velocity"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"servovoltage_mode_control"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.voltage_mode_control"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When set to non-zero, the current control loop is not closed, and all\ncurrent commands in amperes are instead treated as voltage mode\ncommands in volts related by the calibrated phase resistance.  For\nhigh winding resistance motors, the default current sense resistors\nare too small for accurate current sensing, resulting in significant\ncogging torque and current sense noise.  If replacing the current\nsense resistors is not an option, this flag can be used to achieve\nsmooth control.  The downside is that the actual torque will no longer\nfollow the applied torque accurately at speed, or in the face of\nexternal disturbances."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When set, the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.pid_dq"}]},{"type":"text","value":" configuration values no longer affect\nanything."}]},{"type":"element","tag":"h2","props":{"id":"servofixed_voltage_mode"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.fixed_voltage_mode"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If non-zero, then no feedback based control of either position or\ncurrent is done.  Instead, a fixed voltage is applied to the phase\nterminals based on the current commanded position and the configured\nnumber of motor poles.  In this mode, the encoder and current sense\nresistors are not used at all for control."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is a similar control mode to inexpensive brushless gimbal\ncontrollers, and relies on burning a fixed amount of power in the\nmotor windings continuously."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When this mode is active, the reported position and velocity will be 0\nwhen the drive is disabled, and exactly equal to the control position\nwhen it is enabled."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Various derating limits are inoperative in this mode:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"torque derating for temperature"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"torque derating when outside position bounds"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the maximum current limit"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"the commanded maximum torque"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A fault will still be triggered for over-temperature."}]},{"type":"element","tag":"h2","props":{"id":"servofixed_voltage_control_v"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.fixed_voltage_control_V"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the fixed voltage control mode, the voltage to apply to the output."}]},{"type":"element","tag":"h2","props":{"id":"servomax_position_slip"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.max_position_slip"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When finite, this enforces a limit on the difference between the\ncontrol position and the current measured position measured in\nrevolutions.  It can be used to prevent \"catching up\" when the\ncontroller is used in velocity mode."}]},{"type":"element","tag":"h2","props":{"id":"servomax_voltage"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.max_voltage"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the input voltage reaches this value, a fault is triggered and all\ntorque is stopped."}]},{"type":"element","tag":"h2","props":{"id":"servomax_power_w"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.max_power_W"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The controller will limit the output power to this value.  The value\nis defined relative to a PWM rate of 40kHz and is scaled linearly with\nrespect to the PWM rate."}]},{"type":"element","tag":"h2","props":{"id":"servopwm_rate_hz"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.pwm_rate_hz"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The PWM rate to use, defaulting to 30000.  Allowable values are\nbetween 15000 and 60000.  Lower values increase efficiency, but limit\npeak power and reduce the maximum speed and control bandwidth."}]},{"type":"element","tag":"h2","props":{"id":"servoderate_temperature"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.derate_temperature"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Torque begins to be limited when the temperature reaches this value."}]},{"type":"element","tag":"h2","props":{"id":"servofault_temperature"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.fault_temperature"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the temperature reaches this value, a fault is triggered and all\ntorque is stopped."}]},{"type":"element","tag":"h2","props":{"id":"servoenable_motor_temperature"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.enable_motor_temperature"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If true, then the motor temperature will be sensed via the TEMP pads\non the board."}]},{"type":"element","tag":"h2","props":{"id":"servomotor_derate_temperature"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.motor_derate_temperature"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Torque begins to be limited when the motor temperature reaches this value."}]},{"type":"element","tag":"h2","props":{"id":"servomotor_fault_temperature"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.motor_fault_temperature"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the motor temperature reaches this value, a fault is triggered and\nall torque is stopped."}]},{"type":"element","tag":"h2","props":{"id":"servoflux_brake_min_voltage"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.flux_brake_min_voltage"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When the input voltage is above this value, the controller causes the\nmotor to act as a \"virtual resistor\" with resistance\n"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.flux_brake_resistance_ohm"}]},{"type":"text","value":".  All extra energy is dumped into\nthe D phase of the motor.  This can be used to handle excess\nregenerative energy if the input DC link is incapable of accepting\nsufficient energy."}]},{"type":"element","tag":"h2","props":{"id":"servomax_current_a"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.max_current_A"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Phase current will never be used more than this value.  It can be\ndecreased to limit the total power used by the controller.  Increasing\nbeyond the factory configured value can result in hardware damage."}]},{"type":"element","tag":"h2","props":{"id":"servomax_velocity"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.max_velocity"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Output power will be limited if the velocity exceeds this threshold."}]},{"type":"element","tag":"h2","props":{"id":"servomax_velocity_derate"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.max_velocity_derate"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once velocity reaches the max_velocity plus this value, allowed output\npower is reduced to 0."}]},{"type":"element","tag":"h2","props":{"id":"servorotation_"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.rotation_*"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"These values configure a higher order torque model for a motor."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.rotation_current_cutoff_A"}]},{"type":"text","value":" if the phase current is less than\nthis value, then the linear relationship implied by "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor.v_per_hz"}]},{"type":"text","value":"\nis used."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once above that cutoff, the following formula is used to determine\ntorque from phase current:"}]},{"type":"element","tag":"pre","props":{"code":"torque = cutoff * tc + torque_scale * log2(1 + (I - cutoff) * current_scale)\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"torque = cutoff * tc + torque_scale * log2(1 + (I - cutoff) * current_scale)\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Where "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"tc"}]},{"type":"text","value":" is the torque constant derived from "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor.v_per_hz"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This model is not automatically calibrated, and needs to be determined\nand configured manually."}]},{"type":"element","tag":"h2","props":{"id":"servodefault_timeout_s"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.default_timeout_s"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When sending position mode commands over CAN, there is an optional\nwatchdog timeout.  If commands are not received at a certain rate,\nthen the controller will latch into the \"position timeout\" state,\nrequiring a stop command to resume operation.  This configuration\nvalue controls the length of time that the controller will wait after\nreceiving a command before entering this state.  If set to "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"nan"}]},{"type":"text","value":" then\nthe controller will never enter this timeout state."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It may be overidden on a per-command basis with the 0x027 register or\nthe "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"t"}]},{"type":"text","value":" optional flag of the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d pos"}]},{"type":"text","value":" command for the diagnostic\ninterface."}]},{"type":"element","tag":"h2","props":{"id":"servotimeout_max_torque_nm"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.timeout_max_torque_Nm"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When in the \"position timeout\" mode the controller acts to damp the\noutput.  This parameter controls the maximum torque available for such\ndamping."}]},{"type":"element","tag":"h2","props":{"id":"servotimeout_mode"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.timeout_mode"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Selects what behavior will take place in the position timeout mode.\nThe allowable values are a subset of the top level modes."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"0 - \"stopped\" - the driver is disengaged"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"10 - \"decelerate to 0 velocity and hold position\""}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"12 - \"zero velocity\""}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"15 - \"brake\""}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For mode 10, "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.default_velocity_limit"}]},{"type":"text","value":" and\n"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.default_accel_limit"}]},{"type":"text","value":" are used to control the deceleration\nprofile to zero speed.  The default PID gains are used.  The only\nlimit on torque when in this timeout mode is "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.max_current_A"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"aux12pinsxmode"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].pins.X.mode"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Selects what functionality will be used on the given pin."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"0 - NC - Not connected (or used for onboard SPI)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 - SPI - Used for one of CLK, MISO, or MOSI"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"2 - SPI CS - Used for SPI CS"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"3 - UART"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"4 - Software quadrature"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"5 - Hardware quadrature"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"6 - Hall"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"7 - Index"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"8 - Sine"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"9 - Cosine"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"10 - Step (not implemented)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"11 - Dir (not implemented)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"12 - RC PWM (not implemented)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"13 - I2C"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"14 - Digital input"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"15 - Digital output (not implemented)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"16 - Analog input"}]}]},{"type":"element","tag":"h2","props":{"id":"aux12pinsxpull"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].pins.X.pull"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Configures optional pullup or pulldown on each pin.  Not all pullup\noptions will be used with every mode.  Additionally, the 2 aux2 pins\non moteus 4.5/8/11 have hard-installed 2k ohm pullups regardless of\nthese settings."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"0 - no pullup or pulldown"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 - pull up"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"2 - pull down"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"3 - open drain (not implemented)"}]}]},{"type":"element","tag":"h2","props":{"id":"aux12i2ci2c_hz"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].i2c.i2c_hz"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The frequency to operate the I2C bus at.  Between 50000 and 400000."}]},{"type":"element","tag":"h2","props":{"id":"aux12i2ci2c_mode"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].i2c.i2c_mode"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"What I2C mode to use."}]},{"type":"element","tag":"h2","props":{"id":"aux12i2cdevicesxtype"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].i2c.devices.X.type"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"What I2C device to expect."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"0 - disabled"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 - AS5048"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"2 - AS5600"}]}]},{"type":"element","tag":"h2","props":{"id":"aux12i2cdevicesxaddress"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].i2c.devices.X.address"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The I2C address to use."}]},{"type":"element","tag":"h2","props":{"id":"aux12i2cdevicesxpoll_ms"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].i2c.devices.X.poll_ms"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"How often in milliseconds to poll the device for more data.  Must no\nless than 5."}]},{"type":"element","tag":"h2","props":{"id":"aux12spimode"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].spi.mode"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The type of SPI device."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"0 - The onboard AS5047P (CPR == 16384). Only valid for aux1.  If\nselected, the CLK, MOSI, and MISO lines must be either NC or\nselected as SPI."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 - Disabled."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"2 - AS5047P (CPR == 16384)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"3 - iC-PZ"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"4 - MA732 (CPR == 65536)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"NOTE: iC-PZ devices require significant configuration and calibration\nbefore use.  Diagnostic mode commands are provided for low level\naccess."}]},{"type":"element","tag":"h2","props":{"id":"aux12spirate_hz"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].spi.rate_hz"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The frequency to operate the SPI bus at.  The default is 12000000."}]},{"type":"element","tag":"h2","props":{"id":"aux12uartmode"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].uart.mode"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The type of UART device."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"0 - Disabled"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 - RLS AksIM-2"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"2 - Tunnel"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"3 - Per-control cycle debug information (undocumented)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"4 - CUI AMT21x series RS422"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When the tunnel mode is selected, data may be sent or received using\nthe CAN diagnostic protocol.  For aux1, use diagnostic channel 2.  For\naux2, use diagnostic channel 3."}]},{"type":"element","tag":"h2","props":{"id":"aux12uartbaud_rate"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].uart.baud_rate"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The baud rate to use for the UART."}]},{"type":"element","tag":"h2","props":{"id":"aux12uartpoll_rate_us"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].uart.poll_rate_us"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For encoder modes, the interval at which to poll the encoder for new\nposition information."}]},{"type":"element","tag":"h2","props":{"id":"aux12uartrs422"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].uart.rs422"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Enable the RS422 transceiver.  This is only valid for 'aux1', and\nrequires that pin D and E ("},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux1.pins.3"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux1.pins.4"}]},{"type":"text","value":") be\nused for UART."}]},{"type":"element","tag":"h2","props":{"id":"aux12uartcui_amt21_address"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].uart.cui_amt21_address"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Select the CUI AMT21 address to communicate with.  The default is 0x54\n(84 decimal), which is the default address CUI AMT21 encoders are\nconfigured with."}]},{"type":"element","tag":"h2","props":{"id":"aux12quadratureenabled"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].quadrature.enabled"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"True/non-zero if quadrature input should be read from this port."}]},{"type":"element","tag":"h2","props":{"id":"aux12quadraturecpr"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].quadrature.cpr"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The number of counts per revolution of the quadrature input.  If used\nas a source, then this CPR must match the one configured in the\nsource."}]},{"type":"element","tag":"h2","props":{"id":"aux12hallenabled"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].hall.enabled"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"True/non-zero if hall effect sensors should be read from this port."}]},{"type":"element","tag":"h2","props":{"id":"aux12hallpolarity"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].hall.polarity"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A bitmask to XOR with the 3 hall phases."}]},{"type":"element","tag":"h2","props":{"id":"aux12indexenabled"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].index.enabled"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"True/non-zero if an index input be read from this port."}]},{"type":"element","tag":"h2","props":{"id":"aux12sine_cosineenabled"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].sine_cosine.enabled"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"True/non-zero if a sine/cosine input should be read from this port."}]},{"type":"element","tag":"h2","props":{"id":"aux12sine_cosinecommon"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"aux[12].sine_cosine.common"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The common mode voltage to use for the sine cosine.  The sampling is\ndone with 12 bits, so 2048 would be exactly 0.5 * 3.3V.  However, it\nis best to calibrate this with actual readings as observed over the\ndiagnostic protocol for optimal performance."}]},{"type":"element","tag":"h2","props":{"id":"motor_positionsourcesxaux_number"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.sources.X.aux_number"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"1 for an aux1 device, or 2 for an aux2 device."}]},{"type":"element","tag":"h2","props":{"id":"motor_positionsourcesxtype"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.sources.X.type"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"One of:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"0 - disabled"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 - SPI"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"2 - UART"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"3 - Quadrature"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"4 - Hall"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"5 - Index"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"6 - Sine/Cosine"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"7 - I2C"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"8 - Sensorless (not implemented)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: The \"Index\" source type is only allowed for an output referenced\nencoder, and can be used as an alternate way to enter the \"output\"\nhomed state."}]},{"type":"element","tag":"h2","props":{"id":"motor_positionsourcesxi2c_device"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.sources.X.i2c_device"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"type"}]},{"type":"text","value":" was \"7/I2C\", this is a 0 based index specifying "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"which"}]},{"type":"text","value":" I2C\ndevice on that port should be used."}]},{"type":"element","tag":"h2","props":{"id":"motor_positionsourcesxincremental_index"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.sources.X.incremental_index"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the specified auxiliary port has an incremental encoder, like a\nquadrature encoder, this can be set to either 1 or 2 in order to use\nan \"index\" pin to reference the data to a given position.  It will\nallow the source to provide theta readings for commutation."}]},{"type":"element","tag":"h2","props":{"id":"motor_positionsourcesxcpr"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.sources.X.cpr"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The CPR of the given input.  In some cases this is automatically set,\nbut in most it will need to be manually entered."}]},{"type":"element","tag":"h2","props":{"id":"motor_positionsourcesxoffsetsign"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.sources.X.offset/sign"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"An integer offset and inversion to apply.  The resulting value is:\n"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"(raw + offset) * sign / cpr"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"motor_positionsourcesxreference"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.sources.X.reference"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"0 - this source is relative to the rotor"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 - this source is relative to the output"}]}]},{"type":"element","tag":"h2","props":{"id":"motor_positionsourcesxpll_filter_hz"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.sources.X.pll_filter_hz"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Selects the cutoff frequency of a low-pass filter used on this source.\nIt should typically be less than 10X the update rate of the input and\nif used as the commutation or output sensor, should be higher than the\nmechanical bandwidth of the plant.  Within that range, it can be tuned\nfor audible noise versus performance."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If set to 0, then no filter is applied.  In that case, sensors which\ndo not natively measure velocity will produce no velocity readings\n(most of them)."}]},{"type":"element","tag":"h2","props":{"id":"motor_positioncommutation_source"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.commutation_source"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A 0-based index into the source list that selects the source to use\nfor commutation.  This means it should have an accurate measure of the\nrelationship between the rotor and stator."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It is not recommended to use quadrature sources for commutation as\nthey can lose counts and require additional application level homing\nsupport at each power-on."}]},{"type":"element","tag":"h2","props":{"id":"motor_positionoutputsource"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.output.source"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A 0-based index into the source list that selects the source to use\nfor the output position.  The position and velocity from this source\nwill be used for control in \"position\" mode."}]},{"type":"element","tag":"h2","props":{"id":"motor_positionoutputoffsetsign"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.output.offset/sign"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The offset is a floating point value measured in output revolutions.\nCombined with the sign of -1/1, they can be used to position the 0\npoint of the output and control its direction of rotation."}]},{"type":"element","tag":"h2","props":{"id":"motor_positionoutputreference_source"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.output.reference_source"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If non-negative, this is a 0-based index into the source list.  The\nselected source is used at power on to disambiguate the output\nposition for multi-turn scenarios or when a reducer is configured."}]},{"type":"element","tag":"h2","props":{"id":"motor_positionrotor_to_output_ratio"},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.rotor_to_output_ratio"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The number of times the output turns for each revolution of the rotor."}]},{"type":"element","tag":"h1","props":{"id":"d-maintenance"},"children":[{"type":"text","value":"D. Maintenance"}]},{"type":"element","tag":"h2","props":{"id":"tview-usage"},"children":[{"type":"text","value":"tview usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"tview can monitor and control 1 or more devices simultaneously.  It can be started with:"}]},{"type":"element","tag":"pre","props":{"code":"python3 -m moteus_gui.tview --target 1[,2,3]...\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes github-dark github-light","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"python3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" -m"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" moteus_gui.tview"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" --target"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" 1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":"[,2,3]...\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When running, the configuration for each can be modified in the left hand tab, and live telemetry values can be displayed or plotted from the right hand tab.  diagnostic mode commands may be issued in the bottom terminal window."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A simple command and scripting language beyond the diagnostic protocol is available within the tview terminal window."}]},{"type":"element","tag":"h3","props":{"id":"communicating-with-a-specific-device"},"children":[{"type":"text","value":"Communicating with a specific device"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If more than one device is available, commands can be sent to a specific device by prefixing the command with "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"ID>"}]},{"type":"text","value":".  For instance, to send a stop command to ID #2, you can do:"}]},{"type":"element","tag":"pre","props":{"code":"2>d stop\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"2>d stop\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The 'A' character can be used to send to all devices simultaneously."}]},{"type":"element","tag":"pre","props":{"code":"A>d stop\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"A>d stop\n"}]}]},{"type":"element","tag":"h3","props":{"id":"sending-multiple-commands-at-once"},"children":[{"type":"text","value":"Sending multiple commands at once"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"&&"}]},{"type":"text","value":" token may be used to separate individual commands, which will be issued back to back.  For instance:"}]},{"type":"element","tag":"pre","props":{"code":"1>d stop && 2>d stop\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"1>d stop && 2>d stop\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Will send the command to both devices."}]},{"type":"element","tag":"h3","props":{"id":"delays"},"children":[{"type":"text","value":"Delays"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A delay may be inserted into a sequence of commands by entering an integer number of milliseconds prefixed by the colon (':') character.  For instance:"}]},{"type":"element","tag":"pre","props":{"code":"d pos nan 0.5 1 s0.5 && :1000 && d stop\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"d pos nan 0.5 1 s0.5 && :1000 && d stop\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Will command a position mode, wait 1s, then command a stop."}]},{"type":"element","tag":"h2","props":{"id":"calibration"},"children":[{"type":"text","value":"Calibration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Assuming your controller has firmware installed already, you can\ncalibrate the controller using the following procedure."}]},{"type":"element","tag":"pre","props":{"code":"python3 -m moteus.moteus_tool --target 1 --calibrate\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes github-dark github-light","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"python3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" -m"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" moteus.moteus_tool"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" --target"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" 1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" --calibrate\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"WARNING: Any attached motor must be able to spin freely.  It will be\nspun in both directions and at high speed."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"After calibrating for an entirely new type of motor, you may need to\nadjust PID gains before the motor will perform acceptably, and/or\nconfigure "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"motor_position.rotor_to_output_ratio"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"setting-the-zero-offset"},"children":[{"type":"text","value":"Setting the \"zero offset\""}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The moteus controller can locate positions within one revolution after being power cycled, and will start with the reported position being between -0.5 and 0.5.  The physical zero position can be set using the following command:"}]},{"type":"element","tag":"pre","props":{"code":"python3 -m moteus.moteus_tool --target 1 --zero-offset\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes github-dark github-light","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"python3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" -m"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" moteus.moteus_tool"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" --target"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" 1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" --zero-offset\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"flashing-and-building-firmware"},"children":[{"type":"text","value":"Flashing and building firmware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To build the moteus firmware, an x86-64 Ubuntu 20.04 or 22.04 system\nis required."}]},{"type":"element","tag":"h3","props":{"id":"flashing-over-can"},"children":[{"type":"text","value":"Flashing over CAN"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The latest firmware can be downloaded from: "},{"type":"element","tag":"a","props":{"href":"https://github.com/mjbots/moteus/releases","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/mjbots/moteus/releases"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You need the file named YYYYMMDD-moteus-HASH.elf NOT the one named\n\"bootloader\"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Download that file and save it somewhere on your computer, then\nsubstitute its path in place of "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"path/to/file.elf"}]},{"type":"text","value":" in the following\ncommand."}]},{"type":"element","tag":"pre","props":{"code":"python3 -m moteus.moteus_tool --target 1 --flash path/to/file.elf\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes github-dark github-light","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"python3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" -m"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" moteus.moteus_tool"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" --target"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" 1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" --flash"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" path/to/file.elf\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"from-the-debug-port"},"children":[{"type":"text","value":"From the debug port"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The firmware can be built and flashed using:"}]},{"type":"element","tag":"pre","props":{"code":"tools/bazel build --config=target //fw:flash\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes github-dark github-light","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"tools/bazel"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" build"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" --config=target"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" //fw:flash\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Or, if already built, flashed using:"}]},{"type":"element","tag":"pre","props":{"code":"./fw/flash.py\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes github-dark github-light","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"./fw/flash.py\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This may require the appropriate binutils to be installed, on Ubuntu\nthis can be accomplished with:"}]},{"type":"element","tag":"pre","props":{"code":"sudo apt install binutils-arm-none-eabi\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes github-dark github-light","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" apt"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" binutils-arm-none-eabi\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"openocd"},"children":[{"type":"text","value":"openocd"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"openocd 0.11.0 or newer is required.  You can find binaries for many\nplatforms at: "},{"type":"element","tag":"a","props":{"href":"https://xpack.github.io/openocd/releases/","rel":["nofollow"]},"children":[{"type":"text","value":"https://xpack.github.io/openocd/releases/"}]}]},{"type":"element","tag":"h3","props":{"id":"building-firmware"},"children":[{"type":"text","value":"Building firmware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This will build, but not flash the firmware.  Only "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"curl"}]},{"type":"text","value":" needs to be\ninstalled."}]},{"type":"element","tag":"pre","props":{"code":"tools/bazel test --config=target //:target\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes github-dark github-light","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"tools/bazel"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" test"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" --config=target"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" //:target\n"}]}]}]}]},{"type":"element","tag":"h1","props":{"id":"e-mechanical-electrical"},"children":[{"type":"text","value":"E. Mechanical / Electrical"}]},{"type":"element","tag":"h2","props":{"id":"mechanical"},"children":[{"type":"text","value":"Mechanical"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current mechanical drawing for the controller can be found at:\n"},{"type":"element","tag":"a","props":{"href":"https://github.com/mjbots/moteus/blob/main/hw/controller/r4.5/20210124-moteus-controller-r45-mechanical.pdf","rel":["nofollow"]},"children":[{"type":"text","value":"20210124-moteus-controller-r45-mechanical.pdf"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current mechanical drawing for the qdd100 servo can be found at:\n"},{"type":"element","tag":"a","props":{"href":"https://drive.google.com/file/d/1KUQyR853e2uw8WOVrQHaeskWYHGSm3nI/view?usp=sharing","rel":["nofollow"]},"children":[{"type":"text","value":"20200315-qdd100-mechanical.pdf"}]}]},{"type":"element","tag":"h2","props":{"id":"electrical-pinout"},"children":[{"type":"text","value":"Electrical / Pinout"}]},{"type":"element","tag":"h3","props":{"id":"jst-ph-3-can"},"children":[{"type":"text","value":"JST PH-3 CAN"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Looking at the pins of the connector with the bottom of the board up\nthe pins are numbered 1 to 3 from left to right."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 - CAN_H"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"2 - CAN_L"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"3 - GND"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"NOTE 1: CAN connections should be terminated by a 120 ohm resistor at\nboth ends of a bus.  Some mjbots products have built in termination\nresistors, such as the pi3hat.  The fdcanusb has a software\nconfigurable termination resistor that is by default on.  moteus\ncontrollers have no termination resistors.  For very short runs, the\nsystem will work terminated only on one side.  However, when runs\nbecome longer than 0.5m, you will likely need to terminate both ends.\nThis can be done by crimping a 120 ohm resistor into a JST PH3\nconnector and connecting it to the open data connector or by\npurchasing a CAN terminating cable."}]},{"type":"element","tag":"h3","props":{"id":"jst-zh-6-swd"},"children":[{"type":"text","value":"JST ZH-6 SWD"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Looking at the pins of the connector with the top of the board up the\npins are numbered 1 to 6 from left to right."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 - NC"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"2 - NRST"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"3 - SWDIO"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"4 - GND"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"5 - SWCLK"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"6 - 3.3V"}]}]},{"type":"element","tag":"h3","props":{"id":"moteus-r4-abs-jst-zh-4"},"children":[{"type":"text","value":"moteus r4 - ABS - JST ZH-4"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pin 1 is closest to the ABS label.  They are assigned as follows:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 - 3.3V"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"2 - SCL"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"3 - SDA"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"4 - GND"}]}]},{"type":"element","tag":"h3","props":{"id":"moteus-n1-j3-jst-gh-6"},"children":[{"type":"text","value":"moteus n1 - J3 - JST GH-6"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"RS422, configured by AUX1 D/E to USART and enabling RS422 on AUX1."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 - 5V"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"2 - A"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"3 - B"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"4 - Y"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"5 - Z"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"6 - GND"}]}]},{"type":"element","tag":"h3","props":{"id":"moteus-n1-aux1-jst-gh-8"},"children":[{"type":"text","value":"moteus n1 - AUX1 - JST GH-8"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 - 5V"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"2 - 3.3V"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"3 - A"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"4 - B"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"5 - C"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"6 - D"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"7 - E"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"8 - GND"}]}]},{"type":"element","tag":"h3","props":{"id":"moteus-n1-aux2-jst-gh-7"},"children":[{"type":"text","value":"moteus n1 - AUX2 - JST GH-7"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 - 5V"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"2 - 3.3V"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"3 - A"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"4 - B"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"5 - C"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"6 - D"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"7 - GND"}]}]},{"type":"element","tag":"h3","props":{"id":"xt30pw-m"},"children":[{"type":"text","value":"XT30PW-M"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Looking at the pins of the power connector with the top of the board\nup, the ground pin is to the left with the chamfered corner and the\npositive supply is to the right with the square corner."}]},{"type":"element","tag":"h3","props":{"id":"pico-spox-6-enc"},"children":[{"type":"text","value":"Pico-SPOX 6 ENC"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Looking at the back of the board with the ENC connector at the top,\npins are numbered 1 as the rightmost, and 6 as the leftmost."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 - 3.3V"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"2 - CS"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"3 - GND"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"4 - SCLK"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"5 - MISO"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"6 - MOSI"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"These pads can be populated with a Molex Pico-SPOX 6 connector PN\n0874380643, or as an alternate, TE 5-1775444-6."}]},{"type":"element","tag":"h1","props":{"id":"f-can-fd-communication"},"children":[{"type":"text","value":"F. CAN-FD communication"}]},{"type":"element","tag":"h2","props":{"id":"moteus_tool-and-tview-configuration"},"children":[{"type":"text","value":"moteus_tool and tview configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"moteus_tool"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"tview"}]},{"type":"text","value":" can be configured to communicate with a\nmoteus controller through a variety of transports.  By default, it\nwill attempt to autodetect either a fdcanusb or socketcan interface."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To force usage of a particular fdcanusb, you can use:"}]},{"type":"element","tag":"pre","props":{"code":"python3 -m moteus.moteus_tool --fdcanusb /path/to/fdcanusb\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes github-dark github-light","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"python3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" -m"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" moteus.moteus_tool"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" --fdcanusb"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" /path/to/fdcanusb\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To force a particular python-can method, you can use:"}]},{"type":"element","tag":"pre","props":{"code":"python3 -m moteus.moteus_tool --can-iface socketcan --can-chan can0\n","language":"sh","meta":"","className":"language-sh shiki shiki-themes github-dark github-light","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"python3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" -m"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" moteus.moteus_tool"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" --can-iface"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" socketcan"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" --can-chan"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":" can0\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"where "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"--can-iface"}]},{"type":"text","value":" specifies the \"interface\" for python-can and\n"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"--can-chan"}]},{"type":"text","value":" specifies the \"channel\"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note, these are in addition to any other "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"moteus_tool"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"tview"}]},{"type":"text","value":"\noptions that may be desired."}]},{"type":"element","tag":"h2","props":{"id":"bit-timings"},"children":[{"type":"text","value":"Bit timings"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Linux in particular appears to select very poor bit-timings for CAN-FD\nwhen running at 5 MBps data rate.  The primary symptom is that no\ncommunication is possible with a moteus controller or fdcanusb unless\nyou clock them a few percent slower than the requisite 5Mbps.  This\ncan be resolved by specifying custom bit timings to the linux\nsocketcan subsystem.  The following timings are known to work for at\nleast some systems:"}]},{"type":"element","tag":"h3","props":{"id":"_40mhz-clock-systems"},"children":[{"type":"text","value":"40MHz clock systems"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Chips such as the MCP2517/8 often use a 40MHz system clock.  The\nfollowing timings have been observed to work:"}]},{"type":"element","tag":"pre","props":{"code":"ip link set can0 up type can \\\n  tq 25 prop-seg 13 phase-seg1 12 phase-seg2 14 sjw 5 \\\n  dtq 25 dprop-seg 3 dphase-seg1 1 dphase-seg2 3 dsjw 3 \\\n  restart-ms 1000 fd on\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"ip link set can0 up type can \\\n  tq 25 prop-seg 13 phase-seg1 12 phase-seg2 14 sjw 5 \\\n  dtq 25 dprop-seg 3 dphase-seg1 1 dphase-seg2 3 dsjw 3 \\\n  restart-ms 1000 fd on\n"}]}]},{"type":"element","tag":"h3","props":{"id":"_80-mhz-clock-systems"},"children":[{"type":"text","value":"80 MHz clock systems"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Adapters such as the PEAK-CAN-FD use a 80MHz clock.  The following\ntimings have been observed to work:"}]},{"type":"element","tag":"pre","props":{"code":"ip link set can0 up type can \\\n  tq 12 prop-seg 25 phase-seg1 25 phase-seg2 29 sjw 10 \\\n  dtq 12 dprop-seg 6 dphase-seg1 2 dphase-seg2 7 dsjw 12 \\\n  restart-ms 1000 fd on\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"ip link set can0 up type can \\\n  tq 12 prop-seg 25 phase-seg1 25 phase-seg2 29 sjw 10 \\\n  dtq 12 dprop-seg 6 dphase-seg1 2 dphase-seg2 7 dsjw 12 \\\n  restart-ms 1000 fd on\n"}]}]},{"type":"element","tag":"h1","props":{"id":"g-application-limitations"},"children":[{"type":"text","value":"G. Application Limitations"}]},{"type":"element","tag":"h2","props":{"id":"position"},"children":[{"type":"text","value":"Position"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The commanded position is limited to +-32767.0 revolutions before any\n"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"rotor_to_output_ratio"}]},{"type":"text","value":" has been applied.  Reducers there will\nfurther limit the range of the commandable revolutions.  For instance,\na 1/10 reducer configured as "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"rotor_to_output_ratio=0.1"}]},{"type":"text","value":" results in\na available position command range of +-3276.7 revolutions."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If either:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"a. the position is commanded as the special value (NaN or maximally negative), or\nb. the kp term is zero either through configuration or the \"kp scale\""}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then it is safe for the controller to \"wrap around\" from the maximal\npossible position to the maximally negative position and vice versa.\nThis is useful in velocity control applications."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The commanded position is internally treated as a 32 bit floating\npoint value.  Thus the position resolution is reduced when the\nmagnitude of the position is large.  Resolution equal to the full\ncapabilities of the onboard encoder (~0.09degree) is maintained to\npositions of +-2048.0 revolutions.  At the maximum possible position,\nthis resolution is reduced to ~1.44degrees.  Note, that this is only\nfor the \"commanded position\".  Velocity control and PID feedback on\nthe position works in an integral space and performs identically\nthroughout the available control envelope."}]},{"type":"element","tag":"h2","props":{"id":"velocity"},"children":[{"type":"text","value":"Velocity"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The smallest usable mechanical velocity which can be commanded is\n0.0001 revolutions per second before any "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"rotor_to_output_ratio"}]},{"type":"text","value":"\nhas been applied.  This corresponds to 0.036 degrees per second.\nReducers will decrease the minimum usable velocity."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The maximum mechanical velocity which can be commanded is 28000 rpm,\nor ~467 revolutions per second before any reducers.  Note, most motors\nwill be incapable of this speed either mechanically or electrically."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The maximum electrical frequency is 4kHz."}]},{"type":"element","tag":"h1","props":{"id":"deployment-considerations"},"children":[{"type":"text","value":"Deployment Considerations"}]},{"type":"element","tag":"h2","props":{"id":"phase-wire-soldering"},"children":[{"type":"text","value":"Phase Wire Soldering"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The connections between moteus and the motor under control must be high quality.  Poor quality solder joints can cause intermittent changes in resistance, sparking, and high voltage transients.  High quality solder joints require:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Sufficient flux to clean oxides off of the wire and the via"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Sufficient temperature so that the entire wire and via is hot enough for the solder to wet all surfaces"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For the former, it is often necessary to add copious amounts of additional flux in addition to the rosin core inside many solders.  For the latter, a high power soldering iron, with a fat tip, and what seems like a long time may be necessary.  The temperature is definitely insufficient if solder touched to any part of the via or wire does not melt and wick instantly.  Usually a small amount of solder is placed between the tip and wire to act as a heat transfer agent.  Then the iron rests on the via and wire for between 5-30s until it looks like the initial solder has wicked fully into the via.  Then additional solder can be added until it forms a clean smooth fillet around the entire via wicking up to the wire."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When complete, the back side of the hole can be examined, and if successful, solder will have wicked partially down out of the via onto the other side forming a clean, smooth fillet there as well."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A demonstration of this can be found in the following video: "},{"type":"element","tag":"a","props":{"href":"https://www.youtube.com/watch?v=mZ9w_TaWmjQ","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.youtube.com/watch?v=mZ9w_TaWmjQ"}]}]},{"type":"element","tag":"h2","props":{"id":"power-cable-construction"},"children":[{"type":"text","value":"Power Cable Construction"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When constructing power cables using XT30 connectors, it is critical that solder joints be sound, otherwise intermittent connectivity can result.  This can cause sparking and high voltage transients.  The soldering principles are the same as in the phase wire soldering section above."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A demonstration of XT30 soldering can be found in the following video:\n"},{"type":"element","tag":"a","props":{"href":"https://www.youtube.com/watch?v=f6WtDFWuxuQ","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.youtube.com/watch?v=f6WtDFWuxuQ"}]}]},{"type":"element","tag":"h2","props":{"id":"power-connectorization"},"children":[{"type":"text","value":"Power Connectorization"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For moteus to operate without damage, the XT30 connectors used to transmit power must make a solid connection that is non-intermittent.  As with poor soldering, an intermittent connection can cause inductive spikes, which will destroy components on the controller."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When connectors are functional, moderate insertion force should be required and the connectors should not \"wiggle\" much after insertion."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The XT30 is not rated for any significant amount of mechanical force when mated.  For any application where cables may flex, strain relief should be used such that no force is applied to the connector.  The connector may be damaged if a system goes \"out of control\" even in one instance, although milder mechanical stress may cause accelerated fatigue and failure."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If sparks are observed, that is "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"definitely"}]},{"type":"text","value":" a problem and the system should be powered off until the connectors can be replaced and mitigations made for what led to that event."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Genuine AMASS connectors are rated for 1000 insertions assuming no other mechanical damage, however off-brand connectors may have worse tolerances and may not make a reliable connection for even one insertion."}]},{"type":"element","tag":"h2","props":{"id":"long-daisy-chains"},"children":[{"type":"text","value":"Long daisy chains"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When connecting more than 3 moteus controllers or servos in a system on a single power or CAN chain, additional factors should be considered."}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"It is recommended to use T-spliced power instead of using the daisy chained power connectors for chains greater than 3 units.  Small connector mis-seating or micro-arcing will cause magnified effects with long chains of controllers."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CAN bus electrical performance can be a limiting factor.  To operate at the default 5Mbps, you will need to ensure that CAN wires are twisted, all crimps are high quality, and that termination is installed.  Split termination may be required, where two 60 ohm resistors are connected in series with a small filter capacitor connected between the center tap of the resistors and ground.  A 4.7nF capacitor is recommended.  If that is insufficient, BRS can be disabled to operate only at 1Mbps.  With "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"moteus_tool"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"tview"}]},{"type":"text","value":", the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"--can-disable-brs"}]},{"type":"text","value":" flag can be used."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"mjbots sells a CAN terminator that can be used for this purpose: "},{"type":"element","tag":"a","props":{"href":"https://mjbots.com/products/jst-ph3-can-fd-terminator","rel":["nofollow"]},"children":[{"type":"text","value":"https://mjbots.com/products/jst-ph3-can-fd-terminator"}]}]},{"type":"element","tag":"h2","props":{"id":"regenerative-braking-safety"},"children":[{"type":"text","value":"Regenerative Braking Safety"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"moteus can be commanded to sharply decelerate loads, either directly in response to commands, or due to external disturbances.  When braking a load, moteus by default applies the generated power to the input DC bus."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If there is nowhere for this power to go, this can cause problems.  The voltage can increase without bound, which in mild cases will cause the CAN transceiver on all devices connected to the bus to fail, and in severe cases can explode the main FETs or other components on the board."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here's what you should know about the facilities moteus has to deal with this, and what you can do to make your design safer."}]},{"type":"element","tag":"h3","props":{"id":"flux-braking"},"children":[{"type":"text","value":"Flux braking"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The feature within moteus itself to deal with this is \"flux braking\".  The flux braking implementation will dissipate extra power in the windings of the motor when the bus voltage gets above a certain threshold.  This is controlled by the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.flux_brake_min_voltage"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.flux_brake_resistance_ohm"}]},{"type":"text","value":" parameters documented above."}]},{"type":"element","tag":"h3","props":{"id":"design-considerations-for-regenerative-braking"},"children":[{"type":"text","value":"Design considerations for regenerative braking"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The following design considerations can be used to minimize the risk of damage to hardware in the event of overvoltage.  These are not a substitute for validation in progressively more demanding situations, but they can help you start off in a good place."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Configure Flux Braking"}]},{"type":"text","value":": To have optimal effect, the flux braking minimum voltage should be approximately only 1.5V above the maximum voltage you expect your supply to provide.  Additionally, the resistance may need to be lowered.  When adjusting the resistance, it is wise to test for stability by gradually increasing the voltage with the drivers engaged using a programmable supply and monitoring for instability in the voltage bus.  This can be identified either with an oscilloscope or audibly.  The default values are set to provide a baseline of protection without compromising the maximum voltage rating of the controller, but more aggressive parameters can be useful when your system voltage is lower and you are able to validate stability."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Power from a battery, not a PSU"}]},{"type":"text","value":": When not charged, batteries are capable of sinking current to minimize over-voltage transients.  However, if the battery is fully charged, most battery management systems drastically reduce the allowable charging current.  Thus, a battery is only useful as a mitigation if it is never charged above say 75 or 80% state of charge."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Decrease overall system voltage"}]},{"type":"text","value":": If you run the moteus controller with say a 10S battery, the peak input voltage can be as high as 42V.  That does not leave very much margin for regenerative loads.  For applications that experience sharp regenerative loads and do not have a battery capable of charging always attached, it is recommended not to exceed 8S (33.6V peak)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Lower the over-voltage fault"}]},{"type":"text","value":": The configuration parameter "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.max_voltage"}]},{"type":"text","value":" can be lowered for all devices on the bus.  If set above the highest expected transient, this can reduce the likelihood of severe transients causing damage."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Use a supply which can sink as well as source"}]},{"type":"text","value":": Powering from an inexpensive lab supply is the most dangerous, as they typically have no ability to sink current, only source it.  A \"two quadrant\" supply is the necessary device."}]}]},{"type":"element","tag":"h2","props":{"id":"pid-tuning"},"children":[{"type":"text","value":"PID Tuning"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There are two configurable PI(D) controllers on moteus.  The \"current loop\" gains are set in "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.pid_dq"}]},{"type":"text","value":", and are set during calibration based on the desired torque bandwidth.  They are not normally changed by the user."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The position control PID loop parameters are set in "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"servo.pid_position"}]},{"type":"text","value":" and are selected by the user to achieve a desired control response."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Rough tuning rules are as follows:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Set kp to be small and kd, ki, and ilimit to be 0.  The kp at this stage should be low enough that any restorative torque is very gradual."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Increase kp by 50% at a time until the desired stiffness is reached.  A command like "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"d pos nan 0 nan"}]},{"type":"text","value":" can be used to \"hold position\", then manual external disturbances can be used to judge the response.  If the control becomes unstable or vibrates, back off by 50%."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Set kd initially to 1/100th of the kp value.  Increase it by roughly 50% at a time until the desired damping is reached.  If instability or vibration results, back off by 50%."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If zero steady state error is required, then an integrative term is required.  If not, leave "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"ilimit"}]},{"type":"text","value":" at 0 and you are done."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If configuring an integrative term, set "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"ilimit"}]},{"type":"text","value":" to be 20% higher than the maximum expected steady state torque.  Then increase ki until the desired response is achieved.  "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"ki"}]},{"type":"text","value":" will likely need to be numerically much larger than kp, on the order of 10-1000x larger.  A more representative control profile than just a \"hold position\" may be needed to determine if the selected integrative constants are sufficient."}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"theory-of-operation","depth":2,"text":"Theory of Operation"},{"id":"usage-modes","depth":2,"text":"Usage Modes","children":[{"id":"velocity-control","depth":3,"text":"Velocity Control"},{"id":"low-speed-or-precise-positioning","depth":3,"text":"Low Speed or Precise Positioning"},{"id":"constant-acceleration-trajectories","depth":3,"text":"Constant Acceleration Trajectories"},{"id":"jerk-limited-trajectories","depth":3,"text":"Jerk Limited Trajectories"},{"id":"high-torque-bandwidth","depth":3,"text":"High Torque Bandwidth"},{"id":"torque-control","depth":3,"text":"Torque Control"}]},{"id":"encoder-configuration","depth":2,"text":"Encoder Configuration","children":[{"id":"auxiliary-port","depth":3,"text":"Auxiliary Port"},{"id":"pin-options","depth":3,"text":"Pin Options"},{"id":"source-configuration","depth":3,"text":"Source Configuration"},{"id":"output-configuration","depth":3,"text":"Output Configuration"}]},{"id":"a1-can-format","depth":2,"text":"A.1 CAN Format","children":[{"id":"can-id","depth":3,"text":"CAN ID"},{"id":"subframes","depth":3,"text":"Subframes"}]},{"id":"a2-register-usage","depth":2,"text":"A.2 Register Usage","children":[{"id":"a2a-mappings","depth":3,"text":"A.2.a Mappings"},{"id":"a2b-registers","depth":3,"text":"A.2.b Registers"},{"id":"_0x010-0x011-0x012-pwm-phase-a-b-c","depth":3,"text":"0x010 / 0x011 / 0x012 - PWM phase A / B / C"},{"id":"_0x014-0x15-0x16-voltage-phase-a-b-c","depth":3,"text":"0x014 / 0x15 / 0x16 - Voltage phase A / B / C"},{"id":"_0x018-voltage-foc-theta","depth":3,"text":"0x018 - Voltage FOC Theta"},{"id":"_0x019-voltage-foc-voltage","depth":3,"text":"0x019 - Voltage FOC Voltage"},{"id":"_0x01a-d-voltage","depth":3,"text":"0x01a - D Voltage"},{"id":"_0x01b-q-voltage","depth":3,"text":"0x01b - Q Voltage"},{"id":"_0x01c-commanded-q-phase-current","depth":3,"text":"0x01c - Commanded Q Phase Current"},{"id":"_0x01d-commanded-d-phase-current","depth":3,"text":"0x01d - Commanded D Phase Current"},{"id":"_0x1e-voltage-foc-theta-rate","depth":3,"text":"0x1e - Voltage FOC Theta Rate"},{"id":"_0x030-proportional-torque","depth":3,"text":"0x030 - Proportional torque"},{"id":"_0x031-integral-torque","depth":3,"text":"0x031 - Integral torque"},{"id":"_0x032-derivative-torque","depth":3,"text":"0x032 - Derivative torque"},{"id":"_0x033-feedforward-torque","depth":3,"text":"0x033 - Feedforward torque"},{"id":"_0x034-total-control-torque","depth":3,"text":"0x034 - Total control torque"},{"id":"_0x038-control-position","depth":3,"text":"0x038 - Control Position"},{"id":"_0x039-control-velocity","depth":3,"text":"0x039 - Control Velocity"},{"id":"_0x03a-control-torque","depth":3,"text":"0x03a - Control Torque"},{"id":"_0x03b-position-error","depth":3,"text":"0x03b - Position Error"},{"id":"_0x03c-velocity-error","depth":3,"text":"0x03c - Velocity Error"},{"id":"_0x03d-torque-error","depth":3,"text":"0x03d - Torque Error"},{"id":"_0x040-stay-within-lower-bound","depth":3,"text":"0x040 - Stay within lower bound"},{"id":"_0x041-stay-within-upper-bound","depth":3,"text":"0x041 - Stay within upper bound"},{"id":"_0x042-feedforward-torque","depth":3,"text":"0x042 - Feedforward torque"},{"id":"_0x043-kp-scale","depth":3,"text":"0x043 - Kp scale"},{"id":"_0x044-kd-scale","depth":3,"text":"0x044 - Kd scale"},{"id":"_0x045-maximum-torque","depth":3,"text":"0x045 - Maximum torque"},{"id":"_0x046-watchdog-timeout","depth":3,"text":"0x046 - Watchdog timeout"},{"id":"_0x050-encoder-0-position","depth":3,"text":"0x050 - Encoder 0 Position"},{"id":"_0x051-encoder-0-velocity","depth":3,"text":"0x051 - Encoder 0 Velocity"},{"id":"_0x052-encoder-1-position","depth":3,"text":"0x052 - Encoder 1 Position"},{"id":"_0x053-encoder-1-velocity","depth":3,"text":"0x053 - Encoder 1 Velocity"},{"id":"_0x054-encoder-2-position","depth":3,"text":"0x054 - Encoder 2 Position"},{"id":"_0x055-encoder-2-velocity","depth":3,"text":"0x055 - Encoder 2 Velocity"},{"id":"_0x058-encoder-validity","depth":3,"text":"0x058 - Encoder Validity"},{"id":"_0x05c-aux1-gpio-command","depth":3,"text":"0x05c - Aux1 GPIO Command"},{"id":"_0x05d-aux2-gpio-command","depth":3,"text":"0x05d - Aux2 GPIO Command"},{"id":"_0x05e-aux1-gpio-status","depth":3,"text":"0x05e - Aux1 GPIO Status"},{"id":"_0x05f-aux2-gpio-status","depth":3,"text":"0x05f - Aux2 GPIO Status"},{"id":"_0x0600x064-aux1-analog-inputs","depth":3,"text":"0x060/0x064 - Aux1 Analog Inputs"},{"id":"_0x0680x06c-aux2-analog-inputs","depth":3,"text":"0x068/0x06c - Aux2 Analog Inputs"},{"id":"_0x070-millisecond-counter","depth":3,"text":"0x070 - Millisecond Counter"},{"id":"_0x071-clock-trim","depth":3,"text":"0x071 - Clock Trim"},{"id":"_0x100-model-number","depth":3,"text":"0x100 - Model Number"},{"id":"_0x101-firmware-version","depth":3,"text":"0x101 - Firmware Version"},{"id":"_0x102-register-map-version","depth":3,"text":"0x102 - Register map version"},{"id":"_0x110-multiplex-id","depth":3,"text":"0x110 - Multiplex ID"},{"id":"_0x120-0x122-serial-number","depth":3,"text":"0x120 - 0x122 - Serial Number"},{"id":"_0x130-set-output-nearest","depth":3,"text":"0x130 - Set Output Nearest"},{"id":"_0x131-set-output-exact","depth":3,"text":"0x131 - Set Output Exact"},{"id":"_0x132-require-reindex","depth":3,"text":"0x132 - Require Reindex"},{"id":"_0x140-driver-fault-1","depth":3,"text":"0x140 - Driver Fault 1"},{"id":"_0x141-driver-fault-2","depth":3,"text":"0x141 - Driver Fault 2"}]},{"id":"a3-example","depth":2,"text":"A.3 Example"},{"id":"b1-d-board-debug","depth":2,"text":"B.1 d - board debug","children":[{"id":"d-stop","depth":3,"text":"d stop"},{"id":"d-raw","depth":3,"text":"d raw"},{"id":"d-pwm","depth":3,"text":"d pwm"},{"id":"d-dq","depth":3,"text":"d dq"},{"id":"d-pos","depth":3,"text":"d pos"},{"id":"d-tmt","depth":3,"text":"d tmt"},{"id":"d-zero","depth":3,"text":"d zero"},{"id":"d-within","depth":3,"text":"d within"},{"id":"d-brake","depth":3,"text":"d brake"},{"id":"d-nearest","depth":3,"text":"d nearest"},{"id":"d-exact","depth":3,"text":"d exact"},{"id":"d-req-reindex","depth":3,"text":"d req-reindex"},{"id":"d-cfg-set-output","depth":3,"text":"d cfg-set-output"},{"id":"d-cal","depth":3,"text":"d cal"},{"id":"d-flash","depth":3,"text":"d flash"}]},{"id":"b2-aux12-aux-port-manipulation","depth":2,"text":"B.2 aux[12] - Aux port manipulation","children":[{"id":"aux1-out-set-gpio-output-values","depth":3,"text":"aux1 out - Set GPIO Output Values"},{"id":"aux1-ic-cmd-initiate-an-ic-pz-command","depth":3,"text":"aux1 ic-cmd - Initiate an iC-PZ command"},{"id":"aux1-ic-wr-write-ic-pz-register","depth":3,"text":"aux1 ic-wr - Write iC-PZ register"},{"id":"aux1-ic-rd-read-ic-pz-register","depth":3,"text":"aux1 ic-rd - Read iC-PZ register"},{"id":"aux1-ic-extra-select-alternate-periodic-data","depth":3,"text":"aux1 ic-extra - Select alternate periodic data"}]},{"id":"b3-tel-telemetry","depth":2,"text":"B.3 tel - telemetry","children":[{"id":"tel-get","depth":3,"text":"tel get"},{"id":"tel-list","depth":3,"text":"tel list"},{"id":"tel-schema","depth":3,"text":"tel schema"},{"id":"tel-rate","depth":3,"text":"tel rate"},{"id":"tel-fmt","depth":3,"text":"tel fmt"},{"id":"tel-stop","depth":3,"text":"tel stop"},{"id":"tel-text","depth":3,"text":"tel text"}]},{"id":"b4-conf-configuration","depth":2,"text":"B.4 conf - configuration","children":[{"id":"conf-enumerate","depth":3,"text":"conf enumerate"},{"id":"conf-get","depth":3,"text":"conf get"},{"id":"conf-set","depth":3,"text":"conf set"},{"id":"conf-load","depth":3,"text":"conf load"},{"id":"conf-write","depth":3,"text":"conf write"},{"id":"conf-default","depth":3,"text":"conf default"}]},{"id":"idid","depth":2,"text":"id.id"},{"id":"canprefix","depth":2,"text":"can.prefix"},{"id":"servoposposition_min","depth":2,"text":"servopos.position_min"},{"id":"servoposposition_max","depth":2,"text":"servopos.position_max"},{"id":"servopid_position","depth":2,"text":"servo.pid_position"},{"id":"servopid_dq","depth":2,"text":"servo.pid_dq"},{"id":"servodefault_velocity_limit-servodefault_accel_limit","depth":2,"text":"servo.default_velocity_limit / servo.default_accel_limit"},{"id":"servovoltage_mode_control","depth":2,"text":"servo.voltage_mode_control"},{"id":"servofixed_voltage_mode","depth":2,"text":"servo.fixed_voltage_mode"},{"id":"servofixed_voltage_control_v","depth":2,"text":"servo.fixed_voltage_control_V"},{"id":"servomax_position_slip","depth":2,"text":"servo.max_position_slip"},{"id":"servomax_voltage","depth":2,"text":"servo.max_voltage"},{"id":"servomax_power_w","depth":2,"text":"servo.max_power_W"},{"id":"servopwm_rate_hz","depth":2,"text":"servo.pwm_rate_hz"},{"id":"servoderate_temperature","depth":2,"text":"servo.derate_temperature"},{"id":"servofault_temperature","depth":2,"text":"servo.fault_temperature"},{"id":"servoenable_motor_temperature","depth":2,"text":"servo.enable_motor_temperature"},{"id":"servomotor_derate_temperature","depth":2,"text":"servo.motor_derate_temperature"},{"id":"servomotor_fault_temperature","depth":2,"text":"servo.motor_fault_temperature"},{"id":"servoflux_brake_min_voltage","depth":2,"text":"servo.flux_brake_min_voltage"},{"id":"servomax_current_a","depth":2,"text":"servo.max_current_A"},{"id":"servomax_velocity","depth":2,"text":"servo.max_velocity"},{"id":"servomax_velocity_derate","depth":2,"text":"servo.max_velocity_derate"},{"id":"servorotation_","depth":2,"text":"servo.rotation_*"},{"id":"servodefault_timeout_s","depth":2,"text":"servo.default_timeout_s"},{"id":"servotimeout_max_torque_nm","depth":2,"text":"servo.timeout_max_torque_Nm"},{"id":"servotimeout_mode","depth":2,"text":"servo.timeout_mode"},{"id":"aux12pinsxmode","depth":2,"text":"aux[12].pins.X.mode"},{"id":"aux12pinsxpull","depth":2,"text":"aux[12].pins.X.pull"},{"id":"aux12i2ci2c_hz","depth":2,"text":"aux[12].i2c.i2c_hz"},{"id":"aux12i2ci2c_mode","depth":2,"text":"aux[12].i2c.i2c_mode"},{"id":"aux12i2cdevicesxtype","depth":2,"text":"aux[12].i2c.devices.X.type"},{"id":"aux12i2cdevicesxaddress","depth":2,"text":"aux[12].i2c.devices.X.address"},{"id":"aux12i2cdevicesxpoll_ms","depth":2,"text":"aux[12].i2c.devices.X.poll_ms"},{"id":"aux12spimode","depth":2,"text":"aux[12].spi.mode"},{"id":"aux12spirate_hz","depth":2,"text":"aux[12].spi.rate_hz"},{"id":"aux12uartmode","depth":2,"text":"aux[12].uart.mode"},{"id":"aux12uartbaud_rate","depth":2,"text":"aux[12].uart.baud_rate"},{"id":"aux12uartpoll_rate_us","depth":2,"text":"aux[12].uart.poll_rate_us"},{"id":"aux12uartrs422","depth":2,"text":"aux[12].uart.rs422"},{"id":"aux12uartcui_amt21_address","depth":2,"text":"aux[12].uart.cui_amt21_address"},{"id":"aux12quadratureenabled","depth":2,"text":"aux[12].quadrature.enabled"},{"id":"aux12quadraturecpr","depth":2,"text":"aux[12].quadrature.cpr"},{"id":"aux12hallenabled","depth":2,"text":"aux[12].hall.enabled"},{"id":"aux12hallpolarity","depth":2,"text":"aux[12].hall.polarity"},{"id":"aux12indexenabled","depth":2,"text":"aux[12].index.enabled"},{"id":"aux12sine_cosineenabled","depth":2,"text":"aux[12].sine_cosine.enabled"},{"id":"aux12sine_cosinecommon","depth":2,"text":"aux[12].sine_cosine.common"},{"id":"motor_positionsourcesxaux_number","depth":2,"text":"motor_position.sources.X.aux_number"},{"id":"motor_positionsourcesxtype","depth":2,"text":"motor_position.sources.X.type"},{"id":"motor_positionsourcesxi2c_device","depth":2,"text":"motor_position.sources.X.i2c_device"},{"id":"motor_positionsourcesxincremental_index","depth":2,"text":"motor_position.sources.X.incremental_index"},{"id":"motor_positionsourcesxcpr","depth":2,"text":"motor_position.sources.X.cpr"},{"id":"motor_positionsourcesxoffsetsign","depth":2,"text":"motor_position.sources.X.offset/sign"},{"id":"motor_positionsourcesxreference","depth":2,"text":"motor_position.sources.X.reference"},{"id":"motor_positionsourcesxpll_filter_hz","depth":2,"text":"motor_position.sources.X.pll_filter_hz"},{"id":"motor_positioncommutation_source","depth":2,"text":"motor_position.commutation_source"},{"id":"motor_positionoutputsource","depth":2,"text":"motor_position.output.source"},{"id":"motor_positionoutputoffsetsign","depth":2,"text":"motor_position.output.offset/sign"},{"id":"motor_positionoutputreference_source","depth":2,"text":"motor_position.output.reference_source"},{"id":"motor_positionrotor_to_output_ratio","depth":2,"text":"motor_position.rotor_to_output_ratio"},{"id":"tview-usage","depth":2,"text":"tview usage","children":[{"id":"communicating-with-a-specific-device","depth":3,"text":"Communicating with a specific device"},{"id":"sending-multiple-commands-at-once","depth":3,"text":"Sending multiple commands at once"},{"id":"delays","depth":3,"text":"Delays"}]},{"id":"calibration","depth":2,"text":"Calibration"},{"id":"setting-the-zero-offset","depth":2,"text":"Setting the \"zero offset\""},{"id":"flashing-and-building-firmware","depth":2,"text":"Flashing and building firmware","children":[{"id":"flashing-over-can","depth":3,"text":"Flashing over CAN"},{"id":"from-the-debug-port","depth":3,"text":"From the debug port"},{"id":"openocd","depth":3,"text":"openocd"},{"id":"building-firmware","depth":3,"text":"Building firmware"}]},{"id":"mechanical","depth":2,"text":"Mechanical"},{"id":"electrical-pinout","depth":2,"text":"Electrical / Pinout","children":[{"id":"jst-ph-3-can","depth":3,"text":"JST PH-3 CAN"},{"id":"jst-zh-6-swd","depth":3,"text":"JST ZH-6 SWD"},{"id":"moteus-r4-abs-jst-zh-4","depth":3,"text":"moteus r4 - ABS - JST ZH-4"},{"id":"moteus-n1-j3-jst-gh-6","depth":3,"text":"moteus n1 - J3 - JST GH-6"},{"id":"moteus-n1-aux1-jst-gh-8","depth":3,"text":"moteus n1 - AUX1 - JST GH-8"},{"id":"moteus-n1-aux2-jst-gh-7","depth":3,"text":"moteus n1 - AUX2 - JST GH-7"},{"id":"xt30pw-m","depth":3,"text":"XT30PW-M"},{"id":"pico-spox-6-enc","depth":3,"text":"Pico-SPOX 6 ENC"}]},{"id":"moteus_tool-and-tview-configuration","depth":2,"text":"moteus_tool and tview configuration"},{"id":"bit-timings","depth":2,"text":"Bit timings","children":[{"id":"_40mhz-clock-systems","depth":3,"text":"40MHz clock systems"},{"id":"_80-mhz-clock-systems","depth":3,"text":"80 MHz clock systems"}]},{"id":"position","depth":2,"text":"Position"},{"id":"velocity","depth":2,"text":"Velocity"},{"id":"phase-wire-soldering","depth":2,"text":"Phase Wire Soldering"},{"id":"power-cable-construction","depth":2,"text":"Power Cable Construction"},{"id":"power-connectorization","depth":2,"text":"Power Connectorization"},{"id":"long-daisy-chains","depth":2,"text":"Long daisy chains"},{"id":"regenerative-braking-safety","depth":2,"text":"Regenerative Braking Safety","children":[{"id":"flux-braking","depth":3,"text":"Flux braking"},{"id":"design-considerations-for-regenerative-braking","depth":3,"text":"Design considerations for regenerative braking"}]},{"id":"pid-tuning","depth":2,"text":"PID Tuning"}]}},"_type":"markdown","_id":"content:1.original:3.reference.md","_source":"content","_file":"1.original/3.reference.md","_extension":"md"},{"_path":"/original/api_brainstorm","_dir":"original","_draft":false,"_partial":false,"_locale":"","title":"ApiBrainstorm","description":"Hypothetical python sessions.","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Hypothetical python sessions."}]},{"type":"element","tag":"pre","props":{"className":"language-py shiki shiki-themes github-dark github-light","code":"# This would connect to a single controller via some appropriate mechanism,\n# (likely an attached fdcanusb or a pi3hat).\n\nimport asyncio\n\nimport moteus\n\nasync def main():\n    controller = moteus.Controller()  # default id of 1\n\n    while True:\n        print(await controller.set_position(position = 0.1 * math.sin(time.time()), query=True))\n\nasyncio.run(main())\n","language":"py","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D"},"children":[{"type":"text","value":"# This would connect to a single controller via some appropriate mechanism,\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D"},"children":[{"type":"text","value":"# (likely an attached fdcanusb or a pi3hat).\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" asyncio\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" moteus\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" def"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":" main"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"():\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"    controller "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" moteus.Controller()  "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D"},"children":[{"type":"text","value":"# default id of 1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"    while"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" True"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"        print"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" controller.set_position("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#FFAB70;--shiki-default:#E36209"},"children":[{"type":"text","value":"position"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" 0.1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" *"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" math.sin(time.time()), "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#FFAB70;--shiki-default:#E36209"},"children":[{"type":"text","value":"query"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"True"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"asyncio.run(main())\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-py shiki shiki-themes github-dark github-light","code":"# An all-options used variant.\nimport asyncio\n\nimport moteus\n\nasync def main():\n    fdcanusb1 = moteus.Fdcanusb(path='/dev/fdcanusb')\n    fdcanusb2 = moteus.Fdcanusb(path='/dev/ttyACM1')\n\n    router = moteus.Router([(fdcanusb1, [1, 2]),\n                            (fdcanusb2, [3, 5])])\n\n    c1 = moteus.Controller(id=1)  # Will use a default router if any action calls are made\n    c2 = moteus.Controller(id=2,\n                           query_resolution={},\n                           position_resolution={},\n                           router=router)\n\n    while True:\n        data = await router.cycle(\n          c1.make_position(position = 0.1 * math.sin(time.time()), query=True),\n          c2.make_position(position = 0.1 * math.cos(time.time()), query={}),\n        )\n        print(\"1: {}, 2: {}\", data[1].position, data[2].position)\n\n        # This also works, and invokes a separate transmission cycle.\n        await c2.set_position(position = 0.1 * math.cos(time.time()))\n","language":"py","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D"},"children":[{"type":"text","value":"# An all-options used variant.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" asyncio\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" moteus\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" def"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":" main"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"():\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"    fdcanusb1 "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" moteus.Fdcanusb("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#FFAB70;--shiki-default:#E36209"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":"'/dev/fdcanusb'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"    fdcanusb2 "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" moteus.Fdcanusb("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#FFAB70;--shiki-default:#E36209"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":"'/dev/ttyACM1'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"    router "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" moteus.Router([(fdcanusb1, ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"]),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"                            (fdcanusb2, ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"5"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"])])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"    c1 "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" moteus.Controller("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#FFAB70;--shiki-default:#E36209"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":")  "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D"},"children":[{"type":"text","value":"# Will use a default router if any action calls are made\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"    c2 "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" moteus.Controller("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#FFAB70;--shiki-default:#E36209"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#FFAB70;--shiki-default:#E36209"},"children":[{"type":"text","value":"                           query_resolution"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"{},\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#FFAB70;--shiki-default:#E36209"},"children":[{"type":"text","value":"                           position_resolution"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"{},\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#FFAB70;--shiki-default:#E36209"},"children":[{"type":"text","value":"                           router"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"router)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"    while"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" True"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"        data "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" router.cycle(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"          c1.make_position("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#FFAB70;--shiki-default:#E36209"},"children":[{"type":"text","value":"position"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" 0.1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" *"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" math.sin(time.time()), "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#FFAB70;--shiki-default:#E36209"},"children":[{"type":"text","value":"query"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"True"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"          c2.make_position("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#FFAB70;--shiki-default:#E36209"},"children":[{"type":"text","value":"position"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" 0.1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" *"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" math.cos(time.time()), "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#FFAB70;--shiki-default:#E36209"},"children":[{"type":"text","value":"query"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"{}),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"        )\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"        print"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":"\"1: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"{}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":", 2: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"{}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":", data["}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"].position, data["}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"].position)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#6A737D;--shiki-default:#6A737D"},"children":[{"type":"text","value":"        # This also works, and invokes a separate transmission cycle.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"        await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" c2.set_position("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#FFAB70;--shiki-default:#E36209"},"children":[{"type":"text","value":"position"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" 0.1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" *"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" math.cos(time.time()))\n"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:1.original:4.api_brainstorm.md","_source":"content","_file":"1.original/4.api_brainstorm.md","_extension":"md"},{"_path":"/original/power_dist","_dir":"original","_draft":false,"_partial":false,"_locale":"","title":"PowerDist","description":"This document has moved to:","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This document has moved to:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/mjbots/power_dist/","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/mjbots/power_dist/"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:1.original:5.power_dist.md","_source":"content","_file":"1.original/5.power_dist.md","_extension":"md"}],"navigation":[{"title":"Original","_path":"/original","children":[{"title":"Getting started with the moteus controller","_path":"/original/getting_started"},{"title":"Raspberry Pi Installation","_path":"/original/raspberry_pi"},{"title":"Reference","_path":"/original/reference"},{"title":"ApiBrainstorm","_path":"/original/api_brainstorm"},{"title":"PowerDist","_path":"/original/power_dist"}]}]}